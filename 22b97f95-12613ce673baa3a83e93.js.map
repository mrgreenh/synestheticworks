{"version":3,"sources":["webpack:///./node_modules/ptjs/dist/module/pt.js"],"names":["Pt","CanvasSpace","Circle","Color","Const","Curve","DOMSpace","Easing","Form","Grid","GridCascade","Line","Matrix","Pair","Particle","ParticleEmitter","ParticleField","ParticleSystem","Point","PointSet","QuadTree","Rectangle","SVGForm","SVGSpace","SamplePoints","Space","StripeBound","Timer","Triangle","UI","Util","Vector","extend","child","parent","key","hasProp","call","ctor","this","constructor","prototype","__super__","hasOwnProperty","slice","xy","yz","xz","xyz","identical","right","bottom_right","bottom","bottom_left","left","top_left","top","top_right","sideLabels","epsilon","pi","Math","PI","two_pi","half_pi","quarter_pi","one_degree","rad_to_deg","deg_to_rad","gravity","newton","gaussian","rotateAnchor2D","radian","anchor","axis","a","cosA","sinA","get2D","cos","sin","x","y","reflectAnchor2D","line","ang2","inc","intercept","atan","slope","yi","shearAnchor2D","sx","sy","tx","ty","tan","scaleAnchor2D","scale2D","shear2D","rotate2D","translate2D","transform2D","pt","m","byValue","v","set","toRadian","angle","toDegree","toHexColor","number","h","floor","toString","length","toRGBColor","hexString","asRGBA","opacity","b","g","r","substr","parseInt","bound","val","max","positive","half","boundAngle","ang","boundRadian","boundingBox","points","is3D","aa","len1","maxPt","minPt","p","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","z","to","lerp","t","centroid","c","add","divide","same","threshold","abs","within","min","randomRange","random","mixin","klass","mix","k","Object","create","clonePoints","array","results","push","clone","contextRotateOrigin","ctx","origin","mask","size","$multiply","rect","clip","translate","rotate","sinCosTable","i","chance","mean","sigma","exp","d","duration","_time","_ease","_intervalID","start","reset","diff","Date","now","setEasing","ease","check","track","callback","me","clearInterval","setInterval","id","center","_timePrev","_timeDiff","_timeEnd","items","_animID","_animCount","_animPause","_refresh","refresh","render","context","resize","w","clear","item","animate","animateID","onSpaceResize","remove","removeAll","play","time","err","_this","requestAnimationFrame","_playItems","_error","cancelAnimationFrame","console","error","stack","ref","pause","toggle","resume","stop","playTime","superClass","bgcolor","apply","arguments","space","document","querySelector","appended","createElement","setAttribute","_mdown","_mdrag","getContext","display","parent_id","readyCallback","frame","frame_rect","getBoundingClientRect","width","height","window","addEventListener","evt","bind","parentNode","appendChild","setTimeout","dispatchEvent","Event","bg","lastColor","fillStyle","fillRect","clearRect","save","restore","bindCanvas","bindMouse","_bind","_mouseDown","_mouseUp","_mouseOver","_mouseOut","_mouseMove","removeEventListener","_mouseAction","type","px","py","offsetX","layerX","offsetY","layerY","onMouseAction","css","_createSpaceElement","setCSS","isPx","updateCSS","style","innerHML","attr","elem","data","str","cc","strokeStyle","lineWidth","font","filled","stroked","fontSize","fontFace","canvas_id","getElementById","pair","p1","beginPath","moveTo","lineTo","stroke","lines","pairs","ln","fill","closePath","circle","arc","radius","triangle","tri","p2","point","halfsize","x1","x2","y1","y2","pts","polygon","curve","text","txt","maxWidth","fillText","joint","lineJoin","face","draw","shape","sketch","isCircle","ps","xoff","yoff","pos","args","copy","get","Array","quadrant","near","toArray","reverse","__proto__","_p","$min","$max","equal","ceil","_getArgs","$add","subtract","$subtract","multiply","$divide","op","name","$op","instance","atan2","angleBetween","vec","magnitude","_sq","mag","sqrt","distance","normalize","$normalize","dot","projection","cross","bisect","isNormalized","perpendicular","isPerpendicular","surfaceNormal","target","moveBy","mx","reflect2D","alpha","mode","XYZ","D65","parseHex","hex","asColor","hexValue","rgb","indexOf","substring","setMode","toLowerCase","HSLtoRGB","HSBtoRGB","LABtoRGB","LCHtoRGB","XYZtoRGB","RGBtoHSL","RGBtoHSB","RGBtoLAB","RGBtoLCH","RGBtoXYZ","_hexstring","cs","ct","n","values","rgba","toRGB","normalizedInput","normalizedOutput","l","s","hue2rgb","q","f","XYZtoLAB","L","LABtoXYZ","lab","lch","LABtoLCH","LCHtoLAB","pow","round","calc","cy","nnn","XYZtoLUV","u","LUVtoXYZ","cubeY","radH","LUVtoLCH","LCHtoLUV","setRadius","intersectPoint","intersectPath","path","get_pts","disc","discSqrt","t1","t2","direction","intersectLine","bounds","contain","intersectLines","intersectCircle","ca_r2","cb_r2","dr","dr2","dv","hasIntersect","ins","sides","life","age","maxAge","active","complete","momentum","velocity","mass","friction","frame_ms","timeDiff","dt","integrate","integrateRK4","forces","state","force","impulse","force_dt","_evaluate","derivative","position","_map","m1","m2","m3","m4","integrateEuler","collideLine2d","wall","precise","collideEndPt","collided","crossed","curr_dist","curr_pos","end_path","next_dist","next_pos","perpend","prev_pt_on_wall","proj","pt2","pt_on_wall","pvec","tangent","wall_path","getDistanceFromPoint","getPerpendicularFromPoint","withinBounds","collideWithinBounds","collideParticle2d","pb","pa","update","checkOverlap","d1","d2","dir","dot1n","dot1t","dot2n","dot2t","magDiff","normal","pav","pbv","v1n","v1t","v2n","v2t","force_gravitation","RK4","func","c1","c2","c3","d3","count","particles","particle","_remove","ab","index","len2","splice","getAt","$getAt","relative","$relative","interpolate","midpoint","dx","dy","dz","collinear","resetBounds","temp","xi","isPerpendicularLine","line1","line2","s1","s2","getPerpendicular","len","pn","pp","fromProjection","intersectGridLine","path_only","a1","a2","b1","b2","subpoints","num","deep","ptl","pbr","toPointSet","corners","topRight","bottomRight","bottomLeft","topLeft","setCenter","resizeTo","resizeCenterTo","enclose","$enclose","isEnclosed","isLarger","ip1","ip2","lbound","intersectRectangle","intersected","sa","sb","sidesA","sidesB","zi","quadrants","cell","rows","columns","layout","cellCallback","init","xtype","ytype","generate","isOccupied","ref1","getCellSize","cellToRectangle","allowOutofBound","positionToCell","cellpos","resetLayout","occupy","canFit","currCol","currRow","ref2","ref3","fit","cols","colCount","colSize","freeCol","row","column","columnSize","rowSize","neighbors","ns","isArray","setAt","connectFromAnchor","disconnect","close_path","lastP","angles","v1","v2","p0","convexHull","sort","dq","unshift","pop","shift","_getSteps","steps","ts","controlPoints","copyStart","_index","p3","catmullRom","catmullRomPoint","step","ctrls","h1","h2","h3","h4","t3","cardinal","tension","cardinalPoint","h2a","h3a","bezier","bezierPoint","bspline","bsplineTensionPoint","bsplinePoint","medial","side","perimeter","lens","value","lengths","area","hp","oppositeSide","adjacentSides","bisector","asLine","ad","bp","altitude","c0","orthocenter","incenter","incircle","circumcenter","pbs","bisectors","circumcircle","intersectPath3D","det","e1","e2","inv_det","qvec","tvec","intersectTriangle","group","groupID","groupCount","currentID","_domId","cap","scope","group_id","nextID","getScope","_scopeID","styles","st","svgElement","cx","checkBounds","join","textContent","createElementNS","querySelectorAll","removeChild","firstChild","linear","_linear","quadIn","_quadIn","quadOut","_quadOut","cubicIn","_cubicIn","cubicOut","_cubicOut","elastic","el","asin","_elastic","bounce","_bounce","startRow","findStartRow","ac","allRowsFree","rc","ref4","system","lastTime","period","frequency","emit","removal","work","quads","depth","max_depth","max_items","getQuads","list","getItems","addToQuad","_depth","splitQuad","resetQuad","bestcandidate","poisson","boundsize","setBounds","bestCandidateSampler","quartersize","maxDist","poissonSampler","cellsize","SQRT1_2","grid","gridWidth","gridHeight","cellSize","radius2","R","queue","queueSize","sampleSize","sincos","sample","numSamples","best","bestDist","nearest","_poissonSample","_poissonCheck","_bestCandidateCheck","_dist","dist","halfbound","it","matches","i0","i1","j","j0","j1","o","bestCandidate","samples","_nearest","intersetPoint","stripes","method","setFrequency","setStripes","getStripes","freq","result","getStripeLines","setMask","sz","anchorMask","dragging","dragTarget","Noise","perm","grad3","simplex","seed","_dot","perlin2d","xin","yin","_fade","n00","n01","n10","n11","simplex2d","G2","gi0","gi1","gi2","ii","jj","t0","x0","y0","module","exports"],"mappings":"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AG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EAAG,GAAI,CAAC,EAAG,EAAG,EA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","file":"22b97f95-12613ce673baa3a83e93.js","sourcesContent":["require(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar Pt = {};\n(function () {\n  var CanvasSpace,\n      Circle,\n      Color,\n      Const,\n      Curve,\n      DOMSpace,\n      Easing,\n      Form,\n      Grid,\n      GridCascade,\n      Line,\n      Matrix,\n      Noise,\n      Pair,\n      Particle,\n      ParticleEmitter,\n      ParticleField,\n      ParticleSystem,\n      Point,\n      PointSet,\n      QuadTree,\n      Rectangle,\n      SVGForm,\n      SVGSpace,\n      SamplePoints,\n      Space,\n      StripeBound,\n      Timer,\n      Triangle,\n      UI,\n      Util,\n      Vector,\n      extend = function extend(child, parent) {\n    for (var key in parent) {\n      if (hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  },\n      hasProp = {}.hasOwnProperty,\n      slice = [].slice;\n\n  Const = function () {\n    function Const() {}\n\n    Const.xy = 'xy';\n    Const.yz = 'yz';\n    Const.xz = 'xz';\n    Const.xyz = 'xyz';\n    Const.identical = -1;\n    Const.right = 3;\n    Const.bottom_right = 4;\n    Const.bottom = 5;\n    Const.bottom_left = 6;\n    Const.left = 7;\n    Const.top_left = 0;\n    Const.top = 1;\n    Const.top_right = 2;\n    Const.sideLabels = [\"identical\", \"right\", \"bottom right\", \"bottom\", \"bottom left\", \"left\", \"top left\", \"top\", \"top right\"];\n    Const.epsilon = 0.0001;\n    Const.pi = Math.PI;\n    Const.two_pi = 6.283185307179586;\n    Const.half_pi = 1.5707963267948966;\n    Const.quarter_pi = 0.7853981633974483;\n    Const.one_degree = 0.017453292519943295;\n    Const.rad_to_deg = 57.29577951308232;\n    Const.deg_to_rad = 0.017453292519943295;\n    Const.gravity = 9.81;\n    Const.newton = 0.10197;\n    Const.gaussian = 0.3989422804014327;\n    return Const;\n  }();\n\n  this.Const = Const;\n\n  Matrix = function () {\n    function Matrix() {}\n\n    Matrix.rotateAnchor2D = function (radian, anchor, axis) {\n      var a, cosA, sinA;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      a = anchor.get2D(axis);\n      cosA = Math.cos(radian);\n      sinA = Math.sin(radian);\n      return [cosA, sinA, 0, -sinA, cosA, 0, a.x * (1 - cosA) + a.y * sinA, a.y * (1 - cosA) - a.x * sinA, 1];\n    };\n\n    Matrix.reflectAnchor2D = function (line, axis) {\n      var ang2, cosA, inc, sinA;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      inc = line.intercept(axis);\n      ang2 = Math.atan(inc.slope) * 2;\n      cosA = Math.cos(ang2);\n      sinA = Math.sin(ang2);\n      return [cosA, sinA, 0, sinA, -cosA, 0, -inc.yi * sinA, inc.yi + inc.yi * cosA, 1];\n    };\n\n    Matrix.shearAnchor2D = function (sx, sy, anchor, axis) {\n      var a, tx, ty;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      a = anchor.get2D(axis);\n      tx = Math.tan(sx);\n      ty = Math.tan(sy);\n      return [1, tx, 0, ty, 1, 0, -a.y * ty, -a.x * tx, 1];\n    };\n\n    Matrix.scaleAnchor2D = function (sx, sy, anchor, axis) {\n      var a;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      a = anchor.get2D(axis);\n      return [sx, 0, 0, 0, sy, 0, -a.x * sx + a.x, -a.y * sy + a.y, 1];\n    };\n\n    Matrix.scale2D = function (x, y) {\n      return [x, 0, 0, 0, y, 0, 0, 0, 1];\n    };\n\n    Matrix.shear2D = function (x, y) {\n      return [1, Math.tan(x), 0, Math.tan(y), 1, 0, 0, 0, 1];\n    };\n\n    Matrix.rotate2D = function (cosA, sinA) {\n      return [cosA, sinA, 0, -sinA, cosA, 0, 0, 0, 1];\n    };\n\n    Matrix.translate2D = function (x, y) {\n      return [1, 0, 0, 0, 1, 0, x, y, 1];\n    };\n\n    Matrix.transform2D = function (pt, m, axis, byValue) {\n      var v, x, y;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      if (byValue == null) {\n        byValue = false;\n      }\n\n      v = pt.get2D(axis);\n      x = v.x * m[0] + v.y * m[3] + m[6];\n      y = v.x * m[1] + v.y * m[4] + m[7];\n      v.x = x;\n      v.y = y;\n      v = v.get2D(axis, true);\n\n      if (!byValue) {\n        pt.set(v);\n        return pt;\n      }\n\n      return v;\n    };\n\n    return Matrix;\n  }();\n\n  this.Matrix = Matrix;\n\n  Util = function () {\n    function Util() {}\n\n    Util.toRadian = function (angle) {\n      return angle * Const.deg_to_rad;\n    };\n\n    Util.toDegree = function (radian) {\n      return radian * Const.rad_to_deg;\n    };\n\n    Util.toHexColor = function (number) {\n      var h;\n      h = Math.floor(number).toString(16);\n\n      if (h.length === 1) {\n        return \"0\" + h;\n      } else {\n        return h;\n      }\n    };\n\n    Util.toRGBColor = function (hexString, asRGBA, opacity) {\n      var b, g, r;\n\n      if (asRGBA == null) {\n        asRGBA = false;\n      }\n\n      if (opacity == null) {\n        opacity = 1;\n      }\n\n      if (hexString[0] === \"#\") {\n        hexString = hexString.substr(1);\n      }\n\n      if (hexString.length === 3) {\n        r = parseInt(hexString[0] + hexString[0], 16);\n        g = parseInt(hexString[1] + hexString[1], 16);\n        b = parseInt(hexString[2] + hexString[2], 16);\n      } else if (hexString.length >= 6) {\n        r = parseInt(hexString[0] + hexString[1], 16);\n        g = parseInt(hexString[2] + hexString[3], 16);\n        b = parseInt(hexString[4] + hexString[5], 16);\n      } else {\n        r = 0;\n        g = 0;\n        b = 0;\n      }\n\n      if (asRGBA) {\n        return \"rgba(\" + r + \",\" + g + \",\" + b + \",\" + opacity + \")\";\n      } else {\n        return [r, g, b, opacity];\n      }\n    };\n\n    Util.bound = function (val, max, positive) {\n      var a, half;\n\n      if (positive == null) {\n        positive = false;\n      }\n\n      a = val % max;\n      half = max / 2;\n\n      if (a > half) {\n        a -= max;\n      } else if (a < -half) {\n        a += max;\n      }\n\n      if (positive) {\n        if (a < 0) {\n          return a + max;\n        } else {\n          return a;\n        }\n      } else {\n        return a;\n      }\n    };\n\n    Util.boundAngle = function (ang, positive) {\n      return Util.bound(ang, 360, positive);\n    };\n\n    Util.boundRadian = function (radian, positive) {\n      return Util.bound(radian, Const.two_pi, positive);\n    };\n\n    Util.boundingBox = function (points, is3D) {\n      var aa, len1, maxPt, minPt, p;\n\n      if (is3D == null) {\n        is3D = false;\n      }\n\n      minPt = new Point(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n      maxPt = new Point(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\n\n      for (aa = 0, len1 = points.length; aa < len1; aa++) {\n        p = points[aa];\n\n        if (p.x < minPt.x) {\n          minPt.x = p.x;\n        }\n\n        if (p.y < minPt.y) {\n          minPt.y = p.y;\n        }\n\n        if (p.x > maxPt.x) {\n          maxPt.x = p.x;\n        }\n\n        if (p.y > maxPt.y) {\n          maxPt.y = p.y;\n        }\n\n        if (is3D) {\n          if (p.z < minPt.z) {\n            minPt.z = p.z;\n          }\n\n          if (p.z > maxPt.z) {\n            maxPt.z = p.z;\n          }\n        }\n      }\n\n      return new Rectangle(minPt).to(maxPt);\n    };\n\n    Util.lerp = function (a, b, t) {\n      return (1 - t) * a + t * b;\n    };\n\n    Util.centroid = function (points) {\n      var aa, c, len1, p;\n      c = new Vector();\n\n      for (aa = 0, len1 = points.length; aa < len1; aa++) {\n        p = points[aa];\n        c.add(p);\n      }\n\n      return c.divide(points.length);\n    };\n\n    Util.same = function (a, b, threshold) {\n      if (threshold == null) {\n        threshold = Const.epsilon;\n      }\n\n      return Math.abs(a - b) < threshold;\n    };\n\n    Util.within = function (p, a, b) {\n      return p >= Math.min(a, b) && p <= Math.max(a, b);\n    };\n\n    Util.randomRange = function (a, b) {\n      var r;\n\n      if (b == null) {\n        b = 0;\n      }\n\n      r = a > b ? a - b : b - a;\n      return a + Math.random() * r;\n    };\n\n    Util.mixin = function (klass, mix) {\n      var k, v;\n\n      for (k in mix) {\n        v = mix[k];\n\n        if (mix.hasOwnProperty(k)) {\n          klass.prototype[k] = mix[k];\n        }\n      }\n\n      return klass;\n    };\n\n    Util.extend = function (klass, parent) {\n      klass.prototype = Object.create(parent.prototype);\n      klass.prototype.constructor = klass;\n      return klass;\n    };\n\n    Util.clonePoints = function (array) {\n      var aa, len1, p, results;\n      results = [];\n\n      for (aa = 0, len1 = array.length; aa < len1; aa++) {\n        p = array[aa];\n        results.push(p.clone());\n      }\n\n      return results;\n    };\n\n    Util.contextRotateOrigin = function (ctx, bound, radian, origin, mask) {\n      var msz, size;\n\n      if (origin == null) {\n        origin = false;\n      }\n\n      size = bound.size();\n\n      if (!origin) {\n        origin = size.$multiply(0.5);\n        origin.add(bound);\n      }\n\n      if (mask) {\n        msz = mask.size();\n        Form.rect(ctx, mask);\n        ctx.clip();\n      }\n\n      ctx.translate(origin.x, origin.y);\n      ctx.rotate(radian);\n      return ctx.translate(-origin.x, -origin.y);\n    };\n\n    Util.sinCosTable = function () {\n      var aa, cos, i, sin;\n      cos = [];\n      sin = [];\n\n      for (i = aa = 0; aa <= 360; i = aa += 1) {\n        cos[i] = Math.cos(i * Math.PI / 180);\n        sin[i] = Math.sin(i * Math.PI / 180);\n      }\n\n      return {\n        sin: sin,\n        cos: cos\n      };\n    };\n\n    Util.chance = function (p) {\n      return Math.random() < p;\n    };\n\n    Util.gaussian = function (x, mean, sigma) {\n      if (mean == null) {\n        mean = 0;\n      }\n\n      if (sigma == null) {\n        sigma = 1;\n      }\n\n      x = (x - mean) / sigma;\n      return Const.gaussian * Math.exp(-0.5 * x * x) / sigma;\n    };\n\n    return Util;\n  }();\n\n  this.Util = Util;\n\n  Timer = function () {\n    function Timer(d) {\n      if (d == null) {\n        d = 1000;\n      }\n\n      this.duration = d;\n      this._time = 0;\n\n      this._ease = function (t, b, c, d) {\n        return t / d;\n      };\n\n      this._intervalID = -1;\n    }\n\n    Timer.prototype.start = function (reset) {\n      var diff;\n      diff = Math.min(Date.now() - this._time, this.duration);\n\n      if (reset || diff >= this.duration) {\n        return this._time = Date.now();\n      }\n    };\n\n    Timer.prototype.setEasing = function (ease) {\n      return this._ease = ease;\n    };\n\n    Timer.prototype.check = function () {\n      var diff;\n      diff = Math.min(Date.now() - this._time, this.duration);\n      return this._ease(diff, 0, 1, this.duration);\n    };\n\n    Timer.prototype.track = function (callback) {\n      var me;\n      clearInterval(this._intervalID);\n      this.start(true);\n      me = this;\n      this._intervalID = setInterval(function () {\n        var t;\n        t = me.check();\n        callback(t);\n\n        if (t >= 1) {\n          return clearInterval(me._intervalID);\n        }\n      }, 25);\n      return this._intervalID;\n    };\n\n    return Timer;\n  }();\n\n  this.Timer = Timer;\n\n  Space = function () {\n    function Space(id) {\n      if (id == null) {\n        id = 'space';\n      }\n\n      this.id = id;\n      this.size = new Vector();\n      this.center = new Vector();\n      this._timePrev = 0;\n      this._timeDiff = 0;\n      this._timeEnd = -1;\n      this.items = {};\n      this._animID = -1;\n      this._animCount = 0;\n      this._animPause = false;\n      this._refresh = true;\n    }\n\n    Space.prototype.refresh = function (b) {\n      this._refresh = b;\n      return this;\n    };\n\n    Space.prototype.render = function (context) {\n      return this;\n    };\n\n    Space.prototype.resize = function (w, h) {};\n\n    Space.prototype.clear = function () {};\n\n    Space.prototype.add = function (item) {\n      var k;\n\n      if (item.animate != null && typeof item.animate === 'function') {\n        k = this._animCount++;\n        this.items[k] = item;\n        item.animateID = k;\n\n        if (item.onSpaceResize != null) {\n          item.onSpaceResize(this.size.x, this.size.y);\n        }\n      } else {\n        throw \"a player object for Space.add must define animate()\";\n      }\n\n      return this;\n    };\n\n    Space.prototype.remove = function (item) {\n      delete this.items[item.animateID];\n      return this;\n    };\n\n    Space.prototype.removeAll = function () {\n      this.items = {};\n      return this;\n    };\n\n    Space.prototype.play = function (time) {\n      var err;\n\n      if (time == null) {\n        time = 0;\n      }\n\n      this._animID = requestAnimationFrame(function (_this) {\n        return function (t) {\n          return _this.play(t);\n        };\n      }(this));\n\n      if (this._animPause) {\n        return;\n      }\n\n      this._timeDiff = time - this._timePrev;\n\n      try {\n        this._playItems(time);\n      } catch (_error) {\n        err = _error;\n        cancelAnimationFrame(this._animID);\n        console.error(err.stack);\n        throw err;\n      }\n\n      this._timePrev = time;\n      return this;\n    };\n\n    Space.prototype._playItems = function (time) {\n      var k, ref, v;\n\n      if (this._refresh) {\n        this.clear();\n      }\n\n      ref = this.items;\n\n      for (k in ref) {\n        v = ref[k];\n        v.animate(time, this._timeDiff, this.ctx);\n      }\n\n      if (this._timeEnd >= 0 && time > this._timeEnd) {\n        cancelAnimationFrame(this._animID);\n      }\n\n      return this;\n    };\n\n    Space.prototype.pause = function (toggle) {\n      if (toggle == null) {\n        toggle = false;\n      }\n\n      this._animPause = toggle ? !this._animPause : true;\n      return this;\n    };\n\n    Space.prototype.resume = function () {\n      this._animPause = false;\n      return this;\n    };\n\n    Space.prototype.stop = function (t) {\n      if (t == null) {\n        t = 0;\n      }\n\n      this._timeEnd = t;\n      return this;\n    };\n\n    Space.prototype.playTime = function (duration) {\n      if (duration == null) {\n        duration = 5000;\n      }\n\n      this.play();\n      return this.stop(duration);\n    };\n\n    return Space;\n  }();\n\n  this.Space = Space;\n\n  CanvasSpace = function (superClass) {\n    extend(CanvasSpace, superClass);\n\n    function CanvasSpace(id, bgcolor, context) {\n      if (id == null) {\n        id = 'pt_space';\n      }\n\n      if (bgcolor == null) {\n        bgcolor = false;\n      }\n\n      if (context == null) {\n        context = '2d';\n      }\n\n      CanvasSpace.__super__.constructor.apply(this, arguments);\n\n      this.space = document.querySelector(\"#\" + this.id);\n      this.appended = true;\n\n      if (!this.space) {\n        this.space = document.createElement(\"canvas\");\n        this.space.setAttribute(\"id\", this.id);\n        this.appended = false;\n      }\n\n      this._mdown = false;\n      this._mdrag = false;\n      this.bgcolor = bgcolor;\n      this.ctx = this.space.getContext(context);\n    }\n\n    CanvasSpace.prototype.display = function (parent_id, readyCallback) {\n      var frame, frame_rect;\n\n      if (parent_id == null) {\n        parent_id = \"#pt\";\n      }\n\n      if (!this.appended) {\n        frame = document.querySelector(parent_id);\n        frame_rect = frame.getBoundingClientRect();\n\n        if (frame) {\n          this.resize(frame_rect.width, frame_rect.height);\n          window.addEventListener('resize', function (evt) {\n            frame_rect = frame.getBoundingClientRect();\n            return this.resize(frame_rect.width, frame_rect.height, evt);\n          }.bind(this));\n\n          if (this.space.parentNode !== frame) {\n            frame.appendChild(this.space);\n          }\n\n          this.appended = true;\n          setTimeout(function () {\n            this.space.dispatchEvent(new Event('ready'));\n\n            if (readyCallback) {\n              return readyCallback(frame_rect.width, frame_rect.height, this.space);\n            }\n          }.bind(this));\n        } else {\n          throw 'Cannot add canvas to element ' + parent_id;\n        }\n      }\n\n      return this;\n    };\n\n    CanvasSpace.prototype.resize = function (w, h, evt) {\n      var k, p, ref;\n      this.size.set(w, h);\n      this.center = new Vector(w / 2, h / 2);\n      this.space.setAttribute('width', Math.floor(w));\n      this.space.setAttribute('height', Math.floor(h));\n      ref = this.items;\n\n      for (k in ref) {\n        p = ref[k];\n\n        if (p.onSpaceResize != null) {\n          p.onSpaceResize(w, h, evt);\n        }\n      }\n\n      this.render(this.ctx);\n      return this;\n    };\n\n    CanvasSpace.prototype.clear = function (bg) {\n      var lastColor;\n\n      if (bg) {\n        this.bgcolor = bg;\n      }\n\n      lastColor = this.ctx.fillStyle;\n\n      if (this.bgcolor) {\n        this.ctx.fillStyle = this.bgcolor;\n        this.ctx.fillRect(0, 0, this.size.x, this.size.y);\n      } else {\n        this.ctx.clearRect(0, 0, this.size.x, this.size.y);\n      }\n\n      this.ctx.fillStyle = lastColor;\n      return this;\n    };\n\n    CanvasSpace.prototype.animate = function (time) {\n      var k, ref, v;\n      this.ctx.save();\n\n      if (this._refresh) {\n        this.clear();\n      }\n\n      ref = this.items;\n\n      for (k in ref) {\n        v = ref[k];\n        v.animate(time, this._timeDiff, this.ctx);\n      }\n\n      if (this._timeEnd >= 0 && time > this._timeEnd) {\n        cancelAnimationFrame(this._animID);\n      }\n\n      this.ctx.restore();\n      return this;\n    };\n\n    CanvasSpace.prototype.bindCanvas = function (evt, callback) {\n      return this.space.addEventListener(evt, callback);\n    };\n\n    CanvasSpace.prototype.bindMouse = function (_bind) {\n      if (_bind == null) {\n        _bind = true;\n      }\n\n      if (_bind) {\n        this.space.addEventListener(\"mousedown\", this._mouseDown.bind(this));\n        this.space.addEventListener(\"mouseup\", this._mouseUp.bind(this));\n        this.space.addEventListener(\"mouseover\", this._mouseOver.bind(this));\n        this.space.addEventListener(\"mouseout\", this._mouseOut.bind(this));\n        return this.space.addEventListener(\"mousemove\", this._mouseMove.bind(this));\n      } else {\n        this.space.removeEventListener(\"mousedown\", this._mouseDown.bind(this));\n        this.space.removeEventListener(\"mouseup\", this._mouseUp.bind(this));\n        this.space.removeEventListener(\"mouseover\", this._mouseOver.bind(this));\n        this.space.removeEventListener(\"mouseout\", this._mouseOut.bind(this));\n        return this.space.removeEventListener(\"mousemove\", this._mouseMove.bind(this));\n      }\n    };\n\n    CanvasSpace.prototype._mouseAction = function (type, evt) {\n      var k, px, py, ref, results, v;\n      ref = this.items;\n      results = [];\n\n      for (k in ref) {\n        v = ref[k];\n        px = evt.offsetX || evt.layerX;\n        py = evt.offsetY || evt.layerY;\n\n        if (v.onMouseAction != null) {\n          results.push(v.onMouseAction(type, px, py, evt));\n        } else {\n          results.push(void 0);\n        }\n      }\n\n      return results;\n    };\n\n    CanvasSpace.prototype._mouseDown = function (evt) {\n      this._mouseAction(\"down\", evt);\n\n      return this._mdown = true;\n    };\n\n    CanvasSpace.prototype._mouseUp = function (evt) {\n      this._mouseAction(\"up\", evt);\n\n      if (this._mdrag) {\n        this._mouseAction(\"drop\", evt);\n      }\n\n      this._mdown = false;\n      return this._mdrag = false;\n    };\n\n    CanvasSpace.prototype._mouseMove = function (evt) {\n      this._mouseAction(\"move\", evt);\n\n      if (this._mdown) {\n        this._mdrag = true;\n        return this._mouseAction(\"drag\", evt);\n      }\n    };\n\n    CanvasSpace.prototype._mouseOver = function (evt) {\n      return this._mouseAction(\"over\", evt);\n    };\n\n    CanvasSpace.prototype._mouseOut = function (evt) {\n      this._mouseAction(\"out\", evt);\n\n      if (this._mdrag) {\n        this._mouseAction(\"drop\", evt);\n      }\n\n      return this._mdrag = false;\n    };\n\n    return CanvasSpace;\n  }(Space);\n\n  this.CanvasSpace = CanvasSpace;\n\n  DOMSpace = function (superClass) {\n    extend(DOMSpace, superClass);\n\n    function DOMSpace(id, bgcolor, context) {\n      if (id == null) {\n        id = 'pt_space';\n      }\n\n      if (bgcolor == null) {\n        bgcolor = false;\n      }\n\n      if (context == null) {\n        context = 'html';\n      }\n\n      DOMSpace.__super__.constructor.apply(this, arguments);\n\n      this.space = document.querySelector(\"#\" + this.id);\n      this.css = {\n        width: \"100%\",\n        height: \"100%\"\n      };\n      this.appended = true;\n\n      if (!this.space) {\n        this._createSpaceElement();\n      }\n\n      this._mdown = false;\n      this._mdrag = false;\n      this.bgcolor = bgcolor;\n      this.ctx = {};\n    }\n\n    DOMSpace.prototype._createSpaceElement = function () {\n      this.space = document.createElement(\"div\");\n      this.space.setAttribute(\"id\", this.id);\n      return this.appended = false;\n    };\n\n    DOMSpace.prototype.setCSS = function (key, val, isPx) {\n      if (isPx == null) {\n        isPx = false;\n      }\n\n      this.css[key] = isPx ? val + \"px\" : val;\n      return this;\n    };\n\n    DOMSpace.prototype.updateCSS = function () {\n      var k, ref, results, v;\n      ref = this.css;\n      results = [];\n\n      for (k in ref) {\n        v = ref[k];\n        results.push(this.space.style[k] = v);\n      }\n\n      return results;\n    };\n\n    DOMSpace.prototype.display = function (parent_id, readyCallback) {\n      var frame, frame_rect;\n\n      if (parent_id == null) {\n        parent_id = \"#pt\";\n      }\n\n      if (!this.appended) {\n        frame = document.querySelector(parent_id);\n        frame_rect = frame.getBoundingClientRect();\n\n        if (frame) {\n          this.resize(frame_rect.width, frame_rect.height);\n          window.addEventListener('resize', function (evt) {\n            frame_rect = frame.getBoundingClientRect();\n            return this.resize(frame_rect.width, frame_rect.height, evt);\n          }.bind(this));\n\n          if (this.space.parentNode !== frame) {\n            frame.appendChild(this.space);\n          }\n\n          this.appended = true;\n          setTimeout(function () {\n            this.space.dispatchEvent(new Event('ready'));\n\n            if (readyCallback) {\n              return readyCallback(frame_rect.width, frame_rect.height, this.space);\n            }\n          }.bind(this));\n        } else {\n          throw 'Cannot add canvas to element ' + parent_id;\n        }\n      }\n\n      return this;\n    };\n\n    DOMSpace.prototype.resize = function (w, h, evt) {\n      var k, p, ref;\n      this.size.set(w, h);\n      this.center = new Vector(w / 2, h / 2);\n      ref = this.items;\n\n      for (k in ref) {\n        p = ref[k];\n\n        if (p.onSpaceResize != null) {\n          p.onSpaceResize(w, h, evt);\n        }\n      }\n\n      return this;\n    };\n\n    DOMSpace.prototype.clear = function () {\n      return this.space.innerHML = \"\";\n    };\n\n    DOMSpace.prototype.animate = function (time) {\n      var k, ref, v;\n      ref = this.items;\n\n      for (k in ref) {\n        v = ref[k];\n        v.animate(time, this._timeDiff, this.ctx);\n      }\n\n      if (this._timeEnd >= 0 && time > this._timeEnd) {\n        cancelAnimationFrame(this._animID);\n      }\n\n      return this;\n    };\n\n    DOMSpace.prototype.bindCanvas = function (evt, callback) {\n      return this.space.addEventListener(evt, callback);\n    };\n\n    DOMSpace.prototype.bindMouse = function (_bind) {\n      if (_bind == null) {\n        _bind = true;\n      }\n\n      if (_bind) {\n        this.space.addEventListener(\"mousedown\", this._mouseDown.bind(this));\n        this.space.addEventListener(\"mouseup\", this._mouseUp.bind(this));\n        this.space.addEventListener(\"mouseover\", this._mouseOver.bind(this));\n        this.space.addEventListener(\"mouseout\", this._mouseOut.bind(this));\n        return this.space.addEventListener(\"mousemove\", this._mouseMove.bind(this));\n      } else {\n        this.space.removeEventListener(\"mousedown\", this._mouseDown.bind(this));\n        this.space.removeEventListener(\"mouseup\", this._mouseUp.bind(this));\n        this.space.removeEventListener(\"mouseover\", this._mouseOver.bind(this));\n        this.space.removeEventListener(\"mouseout\", this._mouseOut.bind(this));\n        return this.space.removeEventListener(\"mousemove\", this._mouseMove.bind(this));\n      }\n    };\n\n    DOMSpace.prototype._mouseAction = function (type, evt) {\n      var k, px, py, ref, results, v;\n      ref = this.items;\n      results = [];\n\n      for (k in ref) {\n        v = ref[k];\n        px = evt.offsetX || evt.layerX;\n        py = evt.offsetY || evt.layerY;\n\n        if (v.onMouseAction != null) {\n          results.push(v.onMouseAction(type, px, py, evt));\n        } else {\n          results.push(void 0);\n        }\n      }\n\n      return results;\n    };\n\n    DOMSpace.prototype._mouseDown = function (evt) {\n      this._mouseAction(\"down\", evt);\n\n      return this._mdown = true;\n    };\n\n    DOMSpace.prototype._mouseUp = function (evt) {\n      this._mouseAction(\"up\", evt);\n\n      if (this._mdrag) {\n        this._mouseAction(\"drop\", evt);\n      }\n\n      this._mdown = false;\n      return this._mdrag = false;\n    };\n\n    DOMSpace.prototype._mouseMove = function (evt) {\n      this._mouseAction(\"move\", evt);\n\n      if (this._mdown) {\n        this._mdrag = true;\n        return this._mouseAction(\"drag\", evt);\n      }\n    };\n\n    DOMSpace.prototype._mouseOver = function (evt) {\n      return this._mouseAction(\"over\", evt);\n    };\n\n    DOMSpace.prototype._mouseOut = function (evt) {\n      this._mouseAction(\"out\", evt);\n\n      if (this._mdrag) {\n        this._mouseAction(\"drop\", evt);\n      }\n\n      return this._mdrag = false;\n    };\n\n    DOMSpace.attr = function (elem, data) {\n      var k, results, v;\n      results = [];\n\n      for (k in data) {\n        v = data[k];\n        results.push(elem.setAttribute(k, v));\n      }\n\n      return results;\n    };\n\n    DOMSpace.css = function (data) {\n      var k, str, v;\n      str = \"\";\n\n      for (k in data) {\n        v = data[k];\n\n        if (v) {\n          str += k + \": \" + v + \"; \";\n        }\n      }\n\n      return str;\n    };\n\n    return DOMSpace;\n  }(Space);\n\n  this.DOMSpace = DOMSpace;\n\n  Form = function () {\n    function Form(space) {\n      this.cc = space.ctx;\n      this.cc.fillStyle = '#999';\n      this.cc.strokeStyle = '#666';\n      this.cc.lineWidth = 1;\n      this.cc.font = \"11px sans-serif\";\n      this.filled = true;\n      this.stroked = true;\n      this.fontSize = 11;\n      this.fontFace = \"sans-serif\";\n    }\n\n    Form.context = function (canvas_id) {\n      var cc, elem;\n      elem = document.getElementById(canvas_id);\n      cc = elem && elem.getContext ? elem.getContext('2d') : false;\n\n      if (!cc) {\n        throw \"Cannot initiate canvas 2d context\";\n      }\n\n      return cc;\n    };\n\n    Form.line = function (ctx, pair) {\n      if (!pair.p1) {\n        throw pair.toString() + \" is not a Pair\";\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(pair.x, pair.y);\n      ctx.lineTo(pair.p1.x, pair.p1.y);\n      return ctx.stroke();\n    };\n\n    Form.lines = function (ctx, pairs) {\n      var aa, len1, ln, results;\n      results = [];\n\n      for (aa = 0, len1 = pairs.length; aa < len1; aa++) {\n        ln = pairs[aa];\n        results.push(Form.line(ctx, ln));\n      }\n\n      return results;\n    };\n\n    Form.rect = function (ctx, pair, fill, stroke) {\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = false;\n      }\n\n      if (!pair.p1) {\n        throw \"\" + (pair.toString() === !a(Pair));\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(pair.x, pair.y);\n      ctx.lineTo(pair.x, pair.p1.y);\n      ctx.lineTo(pair.p1.x, pair.p1.y);\n      ctx.lineTo(pair.p1.x, pair.y);\n      ctx.closePath();\n\n      if (stroke) {\n        ctx.stroke();\n      }\n\n      if (fill) {\n        return ctx.fill();\n      }\n    };\n\n    Form.circle = function (ctx, c, fill, stroke) {\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = false;\n      }\n\n      ctx.beginPath();\n      ctx.arc(c.x, c.y, c.radius, 0, Const.two_pi, false);\n\n      if (fill) {\n        ctx.fill();\n      }\n\n      if (stroke) {\n        ctx.stroke();\n      }\n    };\n\n    Form.triangle = function (ctx, tri, fill, stroke) {\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = false;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(tri.x, tri.y);\n      ctx.lineTo(tri.p1.x, tri.p1.y);\n      ctx.lineTo(tri.p2.x, tri.p2.y);\n      ctx.closePath();\n\n      if (fill) {\n        ctx.fill();\n      }\n\n      if (stroke) {\n        ctx.stroke();\n      }\n    };\n\n    Form.point = function (ctx, pt, halfsize, fill, stroke, circle) {\n      var x1, x2, y1, y2;\n\n      if (halfsize == null) {\n        halfsize = 2;\n      }\n\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = false;\n      }\n\n      if (circle == null) {\n        circle = false;\n      }\n\n      if (circle) {\n        ctx.beginPath();\n        ctx.arc(pt.x, pt.y, halfsize, 0, Const.two_pi, false);\n      } else {\n        x1 = pt.x - halfsize;\n        y1 = pt.y - halfsize;\n        x2 = pt.x + halfsize;\n        y2 = pt.y + halfsize;\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x1, y2);\n        ctx.lineTo(x2, y2);\n        ctx.lineTo(x2, y1);\n        ctx.closePath();\n      }\n\n      if (fill) {\n        ctx.fill();\n      }\n\n      if (stroke) {\n        ctx.stroke();\n      }\n\n      return pt;\n    };\n\n    Form.points = function (ctx, pts, halfsize, fill, stroke, circle) {\n      var aa, len1, p, results;\n\n      if (halfsize == null) {\n        halfsize = 2;\n      }\n\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = false;\n      }\n\n      if (circle == null) {\n        circle = false;\n      }\n\n      results = [];\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        results.push(Form.point(ctx, p, halfsize, fill, stroke, circle));\n      }\n\n      return results;\n    };\n\n    Form.polygon = function (ctx, pts, closePath, fill, stroke) {\n      var aa, i, ref;\n\n      if (closePath == null) {\n        closePath = true;\n      }\n\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = true;\n      }\n\n      if (pts.length <= 1) {\n        return;\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(pts[0].x, pts[0].y);\n\n      for (i = aa = 1, ref = pts.length; aa < ref; i = aa += 1) {\n        ctx.lineTo(pts[i].x, pts[i].y);\n      }\n\n      if (closePath) {\n        ctx.closePath();\n      }\n\n      if (fill) {\n        ctx.fill();\n      }\n\n      if (stroke) {\n        ctx.stroke();\n      }\n    };\n\n    Form.curve = function (ctx, pts) {\n      return Form.polygon(ctx, pts, false, false, true);\n    };\n\n    Form.text = function (ctx, pt, txt, maxWidth) {\n      return ctx.fillText(txt, pt.x, pt.y, maxWidth);\n    };\n\n    Form.prototype.fill = function (c) {\n      this.cc.fillStyle = c ? c : \"transparent\";\n      this.filled = !!c;\n      return this;\n    };\n\n    Form.prototype.stroke = function (c, width, joint) {\n      this.cc.strokeStyle = c ? c : \"transparent\";\n      this.stroked = !!c;\n\n      if (width) {\n        this.cc.lineWidth = width;\n      }\n\n      if (joint) {\n        this.cc.lineJoin = joint;\n      }\n\n      return this;\n    };\n\n    Form.prototype.font = function (size, face) {\n      if (face == null) {\n        face = this.fontFace;\n      }\n\n      this.fontSize = size;\n      this.cc.font = size + \"px \" + face;\n      return this;\n    };\n\n    Form.prototype.draw = function (shape) {\n      return this.sketch(shape);\n    };\n\n    Form.prototype.sketch = function (shape) {\n      shape.floor();\n\n      if (shape instanceof Circle) {\n        Form.circle(this.cc, shape, this.filled, this.stroked);\n      } else if (shape instanceof Rectangle) {\n        Form.rect(this.cc, shape, this.filled, this.stroked);\n      } else if (shape instanceof Triangle) {\n        Form.triangle(this.cc, shape, this.filled, this.stroked);\n      } else if (shape instanceof Line || shape instanceof Pair) {\n        Form.line(this.cc, shape);\n      } else if (shape instanceof PointSet) {\n        Form.polygon(this.cc, shape.points);\n      } else if (shape instanceof Vector || shape instanceof Point) {\n        Form.point(this.cc, shape);\n      }\n\n      return this;\n    };\n\n    Form.prototype.point = function (p, halfsize, isCircle) {\n      if (halfsize == null) {\n        halfsize = 2;\n      }\n\n      if (isCircle == null) {\n        isCircle = false;\n      }\n\n      Form.point(this.cc, p, halfsize, this.filled, this.stroked, isCircle);\n      return this;\n    };\n\n    Form.prototype.points = function (ps, halfsize, isCircle) {\n      if (halfsize == null) {\n        halfsize = 2;\n      }\n\n      if (isCircle == null) {\n        isCircle = false;\n      }\n\n      Form.points(this.cc, ps, halfsize, this.filled, this.stroked, isCircle);\n      return this;\n    };\n\n    Form.prototype.line = function (p) {\n      Form.line(this.cc, p);\n      return this;\n    };\n\n    Form.prototype.lines = function (ps) {\n      Form.lines(this.cc, ps);\n      return this;\n    };\n\n    Form.prototype.rect = function (p) {\n      Form.rect(this.cc, p, this.filled, this.stroked);\n      return this;\n    };\n\n    Form.prototype.circle = function (p) {\n      Form.circle(this.cc, p, this.filled, this.stroked);\n      return this;\n    };\n\n    Form.prototype.triangle = function (p) {\n      Form.triangle(this.cc, p, this.filled, this.stroked);\n      return this;\n    };\n\n    Form.prototype.polygon = function (ps, closePath) {\n      Form.polygon(this.cc, ps, closePath, this.filled, this.stroked);\n      return this;\n    };\n\n    Form.prototype.curve = function (ps) {\n      Form.curve(this.cc, ps);\n      return this;\n    };\n\n    Form.prototype.text = function (p, txt, maxWidth, xoff, yoff) {\n      var pos;\n\n      if (maxWidth == null) {\n        maxWidth = 1000;\n      }\n\n      pos = new Vector(p);\n\n      if (xoff) {\n        pos.add(xoff, 0);\n      }\n\n      if (yoff) {\n        pos.add(0, yoff);\n      }\n\n      this.cc.fillText(txt, pos.x, pos.y, maxWidth);\n      return this;\n    };\n\n    return Form;\n  }();\n\n  this.Form = Form;\n\n  Point = function () {\n    function Point(args) {\n      this.copy(Point.get(arguments));\n    }\n\n    Point.get = function (args) {\n      if (args.length > 0) {\n        if (typeof args[0] === 'object') {\n          if (args[0] instanceof Array || args[0].length > 0) {\n            return {\n              x: args[0][0] || 0,\n              y: args[0][1] || 0,\n              z: args[0][2] || 0\n            };\n          } else {\n            return {\n              x: args[0].x || 0,\n              y: args[0].y || 0,\n              z: args[0].z || 0\n            };\n          }\n        } else {\n          return {\n            x: args[0] || 0,\n            y: args[1] || 0,\n            z: args[2] || 0\n          };\n        }\n      } else {\n        return {\n          x: 0,\n          y: 0,\n          z: 0\n        };\n      }\n    };\n\n    Point.prototype.quadrant = function (pt, epsilon) {\n      if (epsilon == null) {\n        epsilon = Const.epsilon;\n      }\n\n      if (pt.near(this)) {\n        return Const.identical;\n      }\n\n      if (Math.abs(pt.x - this.x) < epsilon) {\n        if (pt.y < this.y) {\n          return Const.top;\n        } else {\n          return Const.bottom;\n        }\n      }\n\n      if (Math.abs(pt.y - this.y) < epsilon) {\n        if (pt.x < this.x) {\n          return Const.left;\n        } else {\n          return Const.right;\n        }\n      }\n\n      if (pt.y < this.y && pt.x > this.x) {\n        return Const.top_right;\n      } else if (pt.y < this.y && pt.x < this.x) {\n        return Const.top_left;\n      } else if (pt.y > this.y && pt.x < this.x) {\n        return Const.bottom_left;\n      } else {\n        return Const.bottom_right;\n      }\n    };\n\n    Point.prototype.set = function (args) {\n      var p;\n      p = Point.get(arguments);\n      this.x = p.x;\n      this.y = p.y;\n      this.z = p.z;\n      return this;\n    };\n\n    Point.prototype.copy = function (p) {\n      this.x = p.x;\n      this.y = p.y;\n      this.z = p.z;\n      return this;\n    };\n\n    Point.prototype.clone = function () {\n      return new Point(this);\n    };\n\n    Point.prototype.toString = function () {\n      return \"Point \" + this.x + \", \" + this.y + \", \" + this.z;\n    };\n\n    Point.prototype.toArray = function () {\n      return [this];\n    };\n\n    Point.prototype.get2D = function (axis, reverse) {\n      if (reverse == null) {\n        reverse = false;\n      }\n\n      if (axis === Const.xy) {\n        return new this.__proto__.constructor(this);\n      }\n\n      if (axis === Const.xz) {\n        return new this.__proto__.constructor(this.x, this.z, this.y);\n      }\n\n      if (axis === Const.yz) {\n        if (reverse) {\n          return new this.__proto__.constructor(this.z, this.x, this.y);\n        } else {\n          return new this.__proto__.constructor(this.y, this.z, this.x);\n        }\n      }\n\n      return new this.__proto__.constructor(this);\n    };\n\n    Point.prototype.min = function (args) {\n      var _p;\n\n      _p = Point.get(arguments);\n      this.x = Math.min(this.x, _p.x);\n      this.y = Math.min(this.y, _p.y);\n      this.z = Math.min(this.z, _p.z);\n      return this;\n    };\n\n    Point.prototype.$min = function (args) {\n      var _p;\n\n      _p = Point.get(arguments);\n      return new this.__proto__.constructor(Math.min(this.x, _p.x), Math.min(this.y, _p.y), Math.min(this.z, _p.z));\n    };\n\n    Point.prototype.max = function (args) {\n      var _p;\n\n      _p = Point.get(arguments);\n      this.x = Math.max(this.x, _p.x);\n      this.y = Math.max(this.y, _p.y);\n      this.z = Math.max(this.z, _p.z);\n      return this;\n    };\n\n    Point.prototype.$max = function (args) {\n      var _p;\n\n      _p = Point.get(arguments);\n      return new this.__proto__.constructor(Math.max(this.x, _p.x), Math.max(this.y, _p.y), Math.max(this.z, _p.z));\n    };\n\n    Point.prototype.equal = function (args) {\n      var _p;\n\n      _p = Point.get(arguments);\n      return _p.x === this.x && _p.y === this.y && _p.z === this.z;\n    };\n\n    Point.prototype.near = function (pt, epsilon) {\n      var _p;\n\n      if (epsilon == null) {\n        epsilon = Const.epsilon;\n      }\n\n      _p = Point.get(arguments);\n      return Math.abs(_p.x - this.x) < epsilon && Math.abs(_p.y - this.y) < epsilon && Math.abs(_p.z - this.z) < epsilon;\n    };\n\n    Point.prototype.floor = function () {\n      this.x = Math.floor(this.x);\n      this.y = Math.floor(this.y);\n      this.z = Math.floor(this.z);\n      return this;\n    };\n\n    Point.prototype.ceil = function () {\n      this.x = Math.ceil(this.x);\n      this.y = Math.ceil(this.y);\n      this.z = Math.ceil(this.z);\n      return this;\n    };\n\n    return Point;\n  }();\n\n  this.Point = Point;\n\n  Vector = function (superClass) {\n    extend(Vector, superClass);\n\n    function Vector() {\n      Vector.__super__.constructor.apply(this, arguments);\n    }\n\n    Vector.prototype._getArgs = function (args) {\n      if (typeof args[0] === 'number' && args.length > 1) {\n        return args;\n      } else {\n        return args[0];\n      }\n    };\n\n    Vector.prototype.add = function (args) {\n      var _p;\n\n      if (typeof arguments[0] === 'number' && arguments.length === 1) {\n        this.x += arguments[0];\n        this.y += arguments[0];\n        this.z += arguments[0];\n      } else {\n        _p = Point.get(arguments);\n        this.x += _p.x;\n        this.y += _p.y;\n        this.z += _p.z;\n      }\n\n      return this;\n    };\n\n    Vector.prototype.$add = function (args) {\n      var a;\n      a = this._getArgs(arguments);\n      return new Vector(this).add(a);\n    };\n\n    Vector.prototype.subtract = function (args) {\n      var _p;\n\n      if (typeof arguments[0] === 'number' && arguments.length === 1) {\n        this.x -= arguments[0];\n        this.y -= arguments[0];\n        this.z -= arguments[0];\n      } else {\n        _p = Point.get(arguments);\n        this.x -= _p.x;\n        this.y -= _p.y;\n        this.z -= _p.z;\n      }\n\n      return this;\n    };\n\n    Vector.prototype.$subtract = function (args) {\n      var a;\n      a = this._getArgs(arguments);\n      return new Vector(this).subtract(a);\n    };\n\n    Vector.prototype.multiply = function (args) {\n      var _p;\n\n      if (arguments.length === 1 && (typeof arguments[0] === 'number' || typeof arguments[0] === 'object' && arguments[0].length === 1)) {\n        this.x *= arguments[0];\n        this.y *= arguments[0];\n        this.z *= arguments[0];\n      } else {\n        _p = Point.get(arguments);\n        this.x *= _p.x;\n        this.y *= _p.y;\n        this.z *= _p.z;\n      }\n\n      return this;\n    };\n\n    Vector.prototype.$multiply = function (args) {\n      var a;\n      a = this._getArgs(arguments);\n      return new Vector(this).multiply(a);\n    };\n\n    Vector.prototype.divide = function (args) {\n      var _p;\n\n      if (arguments.length === 1 && (typeof arguments[0] === 'number' || typeof arguments[0] === 'object' && arguments[0].length === 1)) {\n        this.x /= arguments[0];\n        this.y /= arguments[0];\n        this.z /= arguments[0];\n      } else {\n        _p = Point.get(arguments);\n        this.x /= _p.x;\n        this.y /= _p.y;\n        this.z /= _p.z;\n      }\n\n      return this;\n    };\n\n    Vector.prototype.$divide = function (args) {\n      var a;\n      a = this._getArgs(arguments);\n      return new Vector(this).divide(a);\n    };\n\n    Vector.prototype.op = function () {\n      var aa, args, len1, name, p, pts;\n      name = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n      pts = this.toArray();\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        p[name].apply(p, args);\n      }\n\n      return this;\n    };\n\n    Vector.prototype.$op = function () {\n      var aa, args, instance, len1, name, p, pts;\n      name = arguments[0], args = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n      instance = this.clone();\n      pts = instance.toArray();\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        p[name].apply(p, args);\n      }\n\n      return instance;\n    };\n\n    Vector.prototype.angle = function (args) {\n      var axis, p;\n\n      if (arguments.length === 0) {\n        return Math.atan2(this.y, this.x);\n      }\n\n      if (typeof arguments[0] === 'string') {\n        axis = arguments[0];\n        p = arguments.length > 1 ? this.$subtract(arguments[1]).multiply(-1) : void 0;\n      } else {\n        p = this.$subtract(arguments[0]).multiply(-1);\n        axis = false;\n      }\n\n      if (p && !axis) {\n        return Math.atan2(p.y, p.x);\n      } else if (axis === Const.xy) {\n        if (p) {\n          return Math.atan2(p.y, p.x);\n        } else {\n          return Math.atan2(this.y, this.x);\n        }\n      } else if (axis === Const.yz) {\n        if (p) {\n          return Math.atan2(p.z, p.y);\n        } else {\n          return Math.atan2(this.z, this.y);\n        }\n      } else if (axis === Const.xz) {\n        if (p) {\n          return Math.atan2(p.z, p.x);\n        } else {\n          return Math.atan2(this.z, this.x);\n        }\n      }\n    };\n\n    Vector.prototype.angleBetween = function (vec, axis) {\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      return Util.boundRadian(this.angle(axis), true) - Util.boundRadian(vec.angle(axis), true);\n    };\n\n    Vector.prototype.magnitude = function (args) {\n      var _sq, axis, m, mag, p, useSq;\n\n      m = {\n        x: this.x * this.x,\n        y: this.y * this.y,\n        z: this.z * this.z\n      };\n      useSq = arguments.length >= 1 && !arguments[arguments.length - 1];\n      _sq = useSq ? function (x) {\n        return x;\n      } : Math.sqrt;\n\n      if (arguments.length === 0) {\n        return _sq(m.x + m.y + m.z);\n      }\n\n      if (typeof arguments[0] === 'string') {\n        axis = arguments[0];\n\n        if (arguments.length > 1 && arguments[1]) {\n          p = this.$subtract(arguments[1]);\n        } else {\n          p = void 0;\n        }\n      } else {\n        p = this.$subtract(arguments[0]);\n        axis = false;\n      }\n\n      mag = p ? {\n        x: p.x * p.x,\n        y: p.y * p.y,\n        z: p.z * p.z\n      } : m;\n\n      if (p && !axis) {\n        return _sq(mag.x + mag.y + mag.z);\n      } else if (axis === Const.xy) {\n        return _sq(mag.x + mag.y);\n      } else if (axis === Const.yz) {\n        return _sq(mag.y + mag.z);\n      } else if (axis === Const.xz) {\n        return _sq(mag.x + mag.z);\n      }\n    };\n\n    Vector.prototype.distance = function (pt, axis) {\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      return this.magnitude(axis, pt);\n    };\n\n    Vector.prototype.normalize = function () {\n      this.set(this.$normalize());\n      return this;\n    };\n\n    Vector.prototype.$normalize = function () {\n      var m;\n      m = this.magnitude();\n\n      if (m === 0) {\n        return new Vector();\n      } else {\n        return new Vector(this.x / m, this.y / m, this.z / m);\n      }\n    };\n\n    Vector.prototype.abs = function () {\n      this.x = Math.abs(this.x);\n      this.y = Math.abs(this.y);\n      this.z = Math.abs(this.z);\n      return this;\n    };\n\n    Vector.prototype.dot = function (p, axis) {\n      if (axis == null) {\n        axis = Const.xyz;\n      }\n\n      if (axis === Const.xyz) {\n        return this.x * p.x + this.y * p.y + this.z * p.z;\n      } else if (axis === Const.xy) {\n        return this.x * p.x + this.y * p.y;\n      } else if (axis === Const.yz) {\n        return this.y * p.y + this.z * p.z;\n      } else if (axis === Const.xz) {\n        return this.x * p.x + this.z * p.z;\n      } else {\n        return this.x * p.x + this.y * p.y + this.z * p.z;\n      }\n    };\n\n    Vector.prototype.projection = function (vec, axis) {\n      var a, b, dot, m;\n\n      if (axis == null) {\n        axis = Const.xyz;\n      }\n\n      m = vec.magnitude();\n      a = this.$normalize();\n      b = new Vector(vec.x / m, vec.y / m, vec.z / m);\n      dot = a.dot(b, axis);\n      return a.$multiply(m * dot);\n    };\n\n    Vector.prototype.cross = function (p) {\n      return new Vector(this.y * p.z - this.z * p.y, this.z * p.x - this.x * p.z, this.x * p.y - this.y * p.x);\n    };\n\n    Vector.prototype.bisect = function (vec, isNormalized) {\n      if (isNormalized == null) {\n        isNormalized = false;\n      }\n\n      if (isNormalized) {\n        return this.$add(vec).divide(2);\n      } else {\n        return this.$normalize().add(vec.$normalize()).divide(2);\n      }\n    };\n\n    Vector.prototype.perpendicular = function (axis) {\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      switch (axis) {\n        case Const.xy:\n          return [new Vector(-this.y, this.x, this.z), new Vector(this.y, -this.x, this.z)];\n\n        case Const.yz:\n          return [new Vector(this.x, -this.z, this.y), new Vector(this.x, this.z, -this.y)];\n\n        case Const.xz:\n          return [new Vector(-this.z, this.y, this.x), new Vector(this.z, -this.y, this.x)];\n\n        default:\n          return [new Vector(-this.y, this.x, this.z), new Vector(this.y, -this.x, this.z)];\n      }\n    };\n\n    Vector.prototype.isPerpendicular = function (p, axis) {\n      if (axis == null) {\n        axis = Const.xyz;\n      }\n\n      return this.dot(p, axis) === 0;\n    };\n\n    Vector.prototype.surfaceNormal = function (p) {\n      return this.cross(p).normalize(true);\n    };\n\n    Vector.prototype.moveTo = function (args) {\n      var aa, d, len1, p, pts, target;\n      target = Point.get(arguments);\n      d = this.$subtract(target);\n      pts = this.toArray();\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        p.subtract(d);\n      }\n\n      return this;\n    };\n\n    Vector.prototype.moveBy = function (args) {\n      var aa, inc, len1, p, pts;\n      inc = Point.get(arguments);\n      pts = this.toArray();\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        p.add(inc);\n      }\n\n      return this;\n    };\n\n    Vector.prototype.rotate2D = function (radian, anchor, axis) {\n      var aa, len1, mx, p, pts;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      if (!anchor) {\n        anchor = new Point(0, 0, 0);\n      }\n\n      mx = Matrix.rotateAnchor2D(radian, anchor, axis);\n      pts = this.toArray();\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        Matrix.transform2D(p, mx, axis);\n      }\n\n      return this;\n    };\n\n    Vector.prototype.reflect2D = function (line, axis) {\n      var aa, len1, mx, p, pts;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      mx = Matrix.reflectAnchor2D(line, axis);\n      pts = this.toArray();\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        Matrix.transform2D(p, mx, axis);\n      }\n\n      return this;\n    };\n\n    Vector.prototype.scale2D = function (sx, sy, anchor, axis) {\n      var aa, len1, mx, p, pts;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      if (!anchor) {\n        anchor = new Point(0, 0, 0);\n      }\n\n      mx = Matrix.scaleAnchor2D(sx, sy, anchor, axis);\n      pts = this.toArray();\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        Matrix.transform2D(p, mx, axis);\n      }\n\n      return this;\n    };\n\n    Vector.prototype.shear2D = function (sx, sy, anchor, axis) {\n      var aa, len1, mx, p, pts;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      if (!anchor) {\n        anchor = new Point(0, 0, 0);\n      }\n\n      mx = Matrix.shearAnchor2D(sx, sy, anchor, axis);\n      pts = this.toArray();\n\n      for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n        p = pts[aa];\n        Matrix.transform2D(p, mx, axis);\n      }\n\n      return this;\n    };\n\n    Vector.prototype.clone = function () {\n      return new Vector(this);\n    };\n\n    Vector.prototype.toString = function () {\n      return \"Vector \" + this.x + \", \" + this.y + \", \" + this.z;\n    };\n\n    return Vector;\n  }(Point);\n\n  this.Vector = Vector;\n\n  Color = function (superClass) {\n    extend(Color, superClass);\n\n    function Color(args) {\n      Color.__super__.constructor.apply(this, arguments);\n\n      this.alpha = arguments.length >= 4 ? Math.min(1, Math.max(arguments[3], 0)) : 1;\n      this.mode = arguments.length >= 5 ? arguments[4] : 'rgb';\n    }\n\n    Color.XYZ = {\n      D65: {\n        x: 95.047,\n        y: 100,\n        z: 108.883\n      }\n    };\n\n    Color.parseHex = function (hex, asColor) {\n      var hexValue, rgb;\n\n      if (asColor == null) {\n        asColor = false;\n      }\n\n      if (hex.indexOf('#') === 0) {\n        hex = hex.substr(1);\n      }\n\n      if (hex.length === 3) {\n        hex = \"\" + hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n      }\n\n      if (hex.length === 8) {\n        this.alpha = hex.substr(6) & 0xFF / 255;\n        hex = hex.substring(0, 6);\n      }\n\n      hexValue = parseInt(hex, 16);\n      rgb = [hexValue >> 16, hexValue >> 8 & 0xFF, hexValue & 0xFF];\n\n      if (asColor) {\n        return new Color(rgb[0], rgb[1], rgb[2]);\n      } else {\n        return rgb;\n      }\n    };\n\n    Color.prototype.setMode = function (m) {\n      m = m.toLowerCase();\n\n      if (m !== this.mode) {\n        switch (this.mode) {\n          case 'hsl':\n            this.copy(Point.get(Color.HSLtoRGB(this.x, this.y, this.z)));\n            break;\n\n          case 'hsb':\n            this.copy(Point.get(Color.HSBtoRGB(this.x, this.y, this.z)));\n            break;\n\n          case 'lab':\n            this.copy(Point.get(Color.LABtoRGB(this.x, this.y, this.z)));\n            break;\n\n          case 'lch':\n            this.copy(Point.get(Color.LCHtoRGB(this.x, this.y, this.z)));\n            break;\n\n          case 'xyz':\n            this.copy(Point.get(Color.XYZtoRGB(this.x, this.y, this.z)));\n        }\n\n        switch (m) {\n          case 'hsl':\n            this.copy(Point.get(Color.RGBtoHSL(this.x, this.y, this.z)));\n            break;\n\n          case 'hsb':\n            this.copy(Point.get(Color.RGBtoHSB(this.x, this.y, this.z)));\n            break;\n\n          case 'lab':\n            this.copy(Point.get(Color.RGBtoLAB(this.x, this.y, this.z)));\n            break;\n\n          case 'lch':\n            this.copy(Point.get(Color.RGBtoLCH(this.x, this.y, this.z)));\n            break;\n\n          case 'xyz':\n            this.copy(Point.get(Color.RGBtoXYZ(this.x, this.y, this.z)));\n        }\n      }\n\n      this.mode = m;\n      return this;\n    };\n\n    Color.prototype.hex = function () {\n      var _hexstring, cs, ct, n;\n\n      if (this.mode === 'rgb') {\n        this.floor();\n      }\n\n      cs = this.values(this.mode !== 'rgb');\n\n      _hexstring = function _hexstring(n) {\n        n = n.toString(16);\n\n        if (n.length < 2) {\n          return '0' + n;\n        } else {\n          return n;\n        }\n      };\n\n      ct = function () {\n        var aa, len1, results;\n        results = [];\n\n        for (aa = 0, len1 = cs.length; aa < len1; aa++) {\n          n = cs[aa];\n          results.push(_hexstring(n));\n        }\n\n        return results;\n      }();\n\n      return '#' + ct[0] + ct[1] + ct[2];\n    };\n\n    Color.prototype.rgb = function () {\n      var cs;\n\n      if (this.mode === 'rgb') {\n        this.floor();\n      }\n\n      cs = this.values(this.mode !== 'rgb');\n      return \"rgb(\" + cs[0] + \", \" + cs[1] + \", \" + cs[2] + \")\";\n    };\n\n    Color.prototype.rgba = function () {\n      var cs;\n\n      if (this.mode === 'rgb') {\n        this.floor();\n      }\n\n      cs = this.values(this.mode !== 'rgb');\n      return \"rgba(\" + cs[0] + \", \" + cs[1] + \", \" + cs[2] + \", \" + this.alpha + \")\";\n    };\n\n    Color.prototype.values = function (toRGB) {\n      var cs, v;\n\n      if (toRGB == null) {\n        toRGB = false;\n      }\n\n      cs = [this.x, this.y, this.z];\n\n      if (toRGB && this.mode !== 'rgb') {\n        switch (this.mode) {\n          case 'hsl':\n            cs = Color.HSLtoRGB(this.x, this.y, this.z);\n            break;\n\n          case 'hsb':\n            cs = Color.HSBtoRGB(this.x, this.y, this.z);\n            break;\n\n          case 'lab':\n            cs = Color.LABtoRGB(this.x, this.y, this.z);\n            break;\n\n          case 'lch':\n            cs = Color.LCHtoRGB(this.x, this.y, this.z);\n            break;\n\n          case 'xyz':\n            cs = Color.XYZtoRGB(this.x, this.y, this.z);\n        }\n      }\n\n      return function () {\n        var aa, len1, results;\n        results = [];\n\n        for (aa = 0, len1 = cs.length; aa < len1; aa++) {\n          v = cs[aa];\n          results.push(Math.floor(v));\n        }\n\n        return results;\n      }();\n    };\n\n    Color.RGBtoHSL = function (r, g, b, normalizedInput, normalizedOutput) {\n      var d, h, l, max, min, s;\n\n      if (!normalizedInput) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n\n      max = Math.max(r, g, b);\n      min = Math.min(r, g, b);\n      h = (max + min) / 2;\n      s = h;\n      l = h;\n\n      if (max === min) {\n        h = 0;\n        s = 0;\n      } else {\n        d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n\n          case g:\n            h = (b - r) / d + 2;\n            break;\n\n          case b:\n            h = (r - g) / d + 4;\n            break;\n\n          default:\n            h = 0;\n        }\n      }\n\n      if (normalizedOutput) {\n        return [h / 60, s, l];\n      } else {\n        return [h * 60, s, l];\n      }\n    };\n\n    Color.HSLtoRGB = function (h, s, l, normalizedInput, normalizedOutput) {\n      var b, g, hue2rgb, p, q, r;\n\n      if (s === 0) {\n        if (normalizedOutput) {\n          return [1, 1, 1];\n        } else {\n          return [255, 255, 255];\n        }\n      } else {\n        if (!normalizedInput) {\n          h /= 360;\n        }\n\n        q = l <= 0.5 ? l * (1 + s) : l + s - l * s;\n        p = 2 * l - q;\n\n        hue2rgb = function hue2rgb(p, q, t) {\n          if (t < 0) {\n            t += 1;\n          } else if (t > 1) {\n            t -= 1;\n          }\n\n          if (t * 6 < 1) {\n            return p + (q - p) * t * 6;\n          } else if (t * 2 < 1) {\n            return q;\n          } else if (t * 3 < 2) {\n            return p + (q - p) * (2 / 3 - t) * 6;\n          } else {\n            return p;\n          }\n        };\n\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n\n        if (normalizedOutput) {\n          return [r, g, b];\n        } else {\n          return [r * 255, g * 255, b * 255];\n        }\n      }\n    };\n\n    Color.RGBtoHSB = function (r, g, b, normalizedInput, normalizedOutput) {\n      var d, h, max, min, s, v;\n\n      if (!normalizedInput) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n\n      max = Math.max(r, g, b);\n      min = Math.min(r, g, b);\n      d = max - min;\n      s = max === 0 ? 0 : d / max;\n      v = max;\n\n      if (max === min) {\n        h = 0;\n      } else {\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n\n          case g:\n            h = (b - r) / d + 2;\n            break;\n\n          case b:\n            h = (r - g) / d + 4;\n            break;\n\n          default:\n            h = 0;\n        }\n      }\n\n      if (normalizedOutput) {\n        return [h / 60, s, v];\n      } else {\n        return [h * 60, s, v];\n      }\n    };\n\n    Color.HSBtoRGB = function (h, s, v, normalizedInput, normalizedOutput) {\n      var f, i, p, q, rgb, t;\n\n      if (!normalizedInput) {\n        h /= 360;\n      }\n\n      i = Math.floor(h * 6);\n      f = h * 6 - i;\n      p = v * (1 - s);\n      q = v * (1 - f * s);\n      t = v * (1 - (1 - f) * s);\n\n      switch (i % 6) {\n        case 0:\n          rgb = [v, t, p];\n          break;\n\n        case 1:\n          rgb = [q, v, p];\n          break;\n\n        case 2:\n          rgb = [p, v, t];\n          break;\n\n        case 3:\n          rgb = [p, q, v];\n          break;\n\n        case 4:\n          rgb = [t, p, v];\n          break;\n\n        case 5:\n          rgb = [v, p, q];\n          break;\n\n        default:\n          rgb = [0, 0, 0];\n      }\n\n      if (normalizedOutput) {\n        return rgb;\n      } else {\n        return [rgb[0] * 255, rgb[1] * 255, rgb[2] * 255];\n      }\n    };\n\n    Color.RGBtoLAB = function (r, g, b, normalizedInput, normalizedOutput) {\n      var xyz;\n\n      if (normalizedInput) {\n        r *= 255;\n        g *= 255;\n        b *= 255;\n      }\n\n      xyz = Color.RGBtoXYZ(r, g, b);\n      return Color.XYZtoLAB(xyz[0], xyz[1], xyz[2]);\n    };\n\n    Color.LABtoRGB = function (L, a, b, normalizedInput, normalizedOutput) {\n      var rgb, xyz;\n\n      if (normalizedInput) {\n        L *= 100;\n        a = (a - 0.5) * 127;\n        b = (b - 0.5) * 127;\n      }\n\n      xyz = Color.LABtoXYZ(L, a, b);\n      rgb = Color.XYZtoRGB(xyz[0], xyz[1], xyz[2]);\n\n      if (normalizedOutput) {\n        return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255];\n      } else {\n        return rgb;\n      }\n    };\n\n    Color.RGBtoLCH = function (r, g, b, normalizedInput, normalizedOutput) {\n      var lab, lch;\n\n      if (normalizedInput) {\n        r *= 255;\n        g *= 255;\n        b *= 255;\n      }\n\n      lab = Color.RGBtoLAB(r, g, b);\n      lch = Color.LABtoLCH(lab[0], lab[1], lab[2]);\n\n      if (normalizedOutput) {\n        return [lch[0] / 100, lch[1] / 100, lch[2] / 360];\n      } else {\n        return lch;\n      }\n    };\n\n    Color.LCHtoRGB = function (L, c, h, normalizedInput, normalizedOutput) {\n      var lab, rgb, xyz;\n\n      if (normalizedInput) {\n        L *= 100;\n        c *= 100;\n        h *= 360;\n      }\n\n      lab = Color.LCHtoLAB(L, c, h);\n      xyz = Color.LABtoXYZ(lab[0], lab[1], lab[2]);\n      rgb = Color.XYZtoRGB(xyz[0], xyz[1], xyz[2]);\n\n      if (normalizedOutput) {\n        return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255];\n      } else {\n        return rgb;\n      }\n    };\n\n    Color.XYZtoRGB = function (x, y, z, normalizedInput, normalizedOutput) {\n      var aa, c, i, len1, rgb;\n\n      if (!normalizedInput) {\n        x = x / 100;\n        y = y / 100;\n        z = z / 100;\n      }\n\n      rgb = [x * 3.2404542 + y * -1.5371385 + z * -0.4985314, x * -0.9692660 + y * 1.8760108 + z * 0.0415560, x * 0.0556434 + y * -0.2040259 + z * 1.0572252];\n\n      for (i = aa = 0, len1 = rgb.length; aa < len1; i = ++aa) {\n        c = rgb[i];\n\n        if (c < 0) {\n          rgb[i] = 0;\n        } else {\n          rgb[i] = Math.min(1, c > 0.0031308 ? 1.055 * Math.pow(c, 1 / 2.4) - 0.055 : 12.92 * c);\n        }\n      }\n\n      if (normalizedOutput) {\n        return rgb;\n      } else {\n        return [Math.round(rgb[0] * 255), Math.round(rgb[1] * 255), Math.round(rgb[2] * 255)];\n      }\n    };\n\n    Color.RGBtoXYZ = function (r, g, b, normalizedInput, normalizedOutput) {\n      if (!normalizedInput) {\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n      }\n\n      r = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\n      g = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\n      b = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\n\n      if (!normalizedOutput) {\n        r = r * 100;\n        g = g * 100;\n        b = b * 100;\n      }\n\n      return [r * 0.4124564 + g * 0.3575761 + b * 0.1804375, r * 0.2126729 + g * 0.7151522 + b * 0.0721750, r * 0.0193339 + g * 0.1191920 + b * 0.9503041];\n    };\n\n    Color.XYZtoLAB = function (x, y, z) {\n      var calc, cy;\n      x = x / Color.XYZ.D65.x;\n      y = y / Color.XYZ.D65.y;\n      z = z / Color.XYZ.D65.z;\n\n      calc = function calc(n) {\n        if (n > 0.008856) {\n          return Math.pow(n, 1 / 3);\n        } else {\n          return 7.787 * n + 16 / 116;\n        }\n      };\n\n      cy = calc(y);\n      return [116 * cy - 16, 500 * (calc(x) - cy), 200 * (cy - calc(z))];\n    };\n\n    Color.LABtoXYZ = function (L, a, b) {\n      var calc, x, xyz, y, z;\n      y = (L + 16) / 116;\n      x = a / 500 + y;\n      z = y - b / 200;\n\n      calc = function calc(n) {\n        var nnn;\n        nnn = Math.pow(n, 3);\n\n        if (nnn > 0.008856) {\n          return nnn;\n        } else {\n          return (n - 16 / 116) / 7.787;\n        }\n      };\n\n      xyz = [Math.min(Color.XYZ.D65.x, Color.XYZ.D65.x * calc(x)), Math.min(Color.XYZ.D65.y, Color.XYZ.D65.y * calc(y)), Math.min(Color.XYZ.D65.y, Color.XYZ.D65.z * calc(z))];\n      return xyz;\n    };\n\n    Color.XYZtoLUV = function (x, y, z) {\n      var L, refU, refV, u, v;\n      u = 4 * x / (x + 15 * y + 3 * z);\n      v = 9 * y / (x + 15 * y + 3 * z);\n      y = y / 100;\n      y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n      refU = 4 * Color.XYZ.D65.x / (Color.XYZ.D65.x + 15 * Color.XYZ.D65.y + 3 * Color.XYZ.D65.z);\n      refV = 9 * Color.XYZ.D65.y / (Color.XYZ.D65.x + 15 * Color.XYZ.D65.y + 3 * Color.XYZ.D65.z);\n      L = 116 * y - 16;\n      return [L, 13 * L * (u - refU), 13 * L * (v - refV)];\n    };\n\n    Color.LUVtoXYZ = function (L, u, v) {\n      var cubeY, refU, refV, x, y;\n      y = (L + 16) / 116;\n      cubeY = y * y * y;\n      y = cubeY > 0.008856 ? cubeY : (y - 16 / 116) / 7.787;\n      refU = 4 * Color.XYZ.D65.x / (Color.XYZ.D65.x + 15 * Color.XYZ.D65.y + 3 * Color.XYZ.D65.z);\n      refV = 9 * Color.XYZ.D65.y / (Color.XYZ.D65.x + 15 * Color.XYZ.D65.y + 3 * Color.XYZ.D65.z);\n      u = u / (13 * L) + refU;\n      v = v / (13 * L) + refV;\n      y = y * 100;\n      x = -1 * (9 * y * u) / ((u - 4) * v - u * v);\n      return [x, y, (9 * y - 15 * v * y - v * x) / (3 * v)];\n    };\n\n    Color.LABtoLCH = function (L, a, b) {\n      var h;\n      h = Math.atan2(b, a);\n      h = h > 0 ? 180 * h / Math.PI : 360 - 180 * Math.abs(h) / Math.PI;\n      return [L, Math.sqrt(a * a + b * b), h];\n    };\n\n    Color.LCHtoLAB = function (L, c, h) {\n      var radH;\n      radH = Math.PI * h / 180;\n      return [L, Math.cos(radH) * c, Math.sin(radH) * c];\n    };\n\n    Color.LUVtoLCH = function (L, u, v) {\n      return LABtoLCH(L, u, v);\n    };\n\n    Color.LCHtoLUV = function (L, c, h) {\n      return LCHtoLAB(L, c, h);\n    };\n\n    return Color;\n  }(Vector);\n\n  this.Color = Color;\n\n  Circle = function (superClass) {\n    extend(Circle, superClass);\n\n    function Circle() {\n      Circle.__super__.constructor.apply(this, arguments);\n\n      this.radius = arguments[3] != null ? arguments[3] : 0;\n    }\n\n    Circle.prototype.setRadius = function (r) {\n      this.radius = r;\n      return this;\n    };\n\n    Circle.prototype.intersectPoint = function (args) {\n      var d, item;\n      item = new Vector(Point.get(arguments));\n      d = item.$subtract(this);\n      return d.x * d.x + d.y * d.y < this.radius * this.radius;\n    };\n\n    Circle.prototype.intersectPath = function (path, get_pts) {\n      var a, b, c, d, disc, discSqrt, f, p, p1, p2, q, t1, t2;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      if (!path instanceof Pair) {\n        return false;\n      }\n\n      d = path.direction();\n      f = this.$subtract(path);\n      a = d.dot(d, Const.xy);\n      b = f.dot(d, Const.xy);\n      c = f.dot(f, Const.xy) - this.radius * this.radius;\n      p = b / a;\n      q = c / a;\n      disc = p * p - q;\n\n      if (disc < 0) {\n        return get_pts ? [] : false;\n      } else {\n        if (!get_pts) {\n          return true;\n        }\n\n        discSqrt = Math.sqrt(disc);\n        t1 = -p + discSqrt;\n        t2 = -p - discSqrt;\n        p1 = new Point(path.x - d.x * t1, path.y - d.y * t1);\n        p2 = new Point(path.x - d.x * t2, path.y - d.y * t2);\n\n        if (disc === 0) {\n          return [p1];\n        } else {\n          return [p1, p2];\n        }\n      }\n    };\n\n    Circle.prototype.intersectLine = function (line, get_pts) {\n      var aa, bounds, len1, p, pi, pts;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      pts = this.intersectPath(line);\n\n      if (pts && pts.length > 0) {\n        pi = [];\n        bounds = line.bounds();\n\n        for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n          p = pts[aa];\n\n          if (Rectangle.contain(p, bounds, bounds.p1)) {\n            if (!get_pts) {\n              return true;\n            }\n\n            pi.push(p);\n          }\n        }\n\n        return get_pts ? pi : pi.length > 0;\n      } else {\n        return get_pts ? [] : false;\n      }\n    };\n\n    Circle.prototype.intersectLines = function (lines, get_pts) {\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      return Line.intersectLines(this, lines, get_pts);\n    };\n\n    Circle.prototype.intersectCircle = function (circle, get_pts) {\n      var a, ca_r2, cb_r2, dr, dr2, dv, h, p;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      dv = circle.$subtract(this);\n      dr2 = dv.magnitude(false);\n      dr = Math.sqrt(dr2);\n      ca_r2 = this.radius * this.radius;\n      cb_r2 = circle.radius * circle.radius;\n\n      if (dr > this.radius + circle.radius) {\n        return get_pts ? [] : false;\n      } else if (dr < Math.abs(this.radius - circle.radius)) {\n        return get_pts ? [new Vector(this), new Vector(circle)] : true;\n      } else {\n        if (!get_pts) {\n          return true;\n        }\n\n        a = (ca_r2 - cb_r2 + dr2) / (2 * dr);\n        h = Math.sqrt(ca_r2 - a * a);\n        p = dv.$multiply(a / dr).add(this);\n        return [new Vector(p.x + h * dv.y / dr, p.y - h * dv.x / dr), new Vector(p.x - h * dv.y / dr, p.y + h * dv.x / dr)];\n      }\n    };\n\n    Circle.prototype.hasIntersect = function (item, get_pts) {\n      var d, ins;\n\n      if (get_pts == null) {\n        get_pts = false;\n      }\n\n      if (item instanceof Circle) {\n        return this.intersectCircle(item, get_pts);\n      } else if (item instanceof Rectangle || item instanceof PointSet || item instanceof Triangle) {\n        return this.intersectLines(item.sides(), get_pts);\n      } else if (item instanceof Pair) {\n        ins = this.intersectLine(item);\n\n        if (!get_pts) {\n          return ins.length > 0;\n        } else {\n          return ins;\n        }\n      } else if (item instanceof Point) {\n        d = item.$subtract(this);\n        return d.x * d.x + d.y * d.y < this.radius * this.radius;\n      } else {\n        if (get_pts) {\n          return [];\n        } else {\n          return false;\n        }\n      }\n    };\n\n    return Circle;\n  }(Vector);\n\n  this.Circle = Circle;\n\n  Particle = function (superClass) {\n    extend(Particle, superClass);\n\n    function Particle() {\n      Particle.__super__.constructor.apply(this, arguments);\n\n      this.id = 0;\n      this.life = {\n        age: 0,\n        maxAge: 0,\n        active: true,\n        complete: false\n      };\n      this.momentum = new Vector();\n      this.velocity = new Vector();\n      this.mass = 2;\n      this.friction = 0;\n      this.frame_ms = 20;\n    }\n\n    Particle.prototype.play = function (time, timeDiff) {\n      var dt, results, t;\n      t = 0;\n      results = [];\n\n      while (timeDiff > 0) {\n        dt = Math.min(timeDiff, this.frame_ms);\n        this.integrate(t / 1000, dt / 1000);\n        timeDiff -= dt;\n        t += dt;\n        results.push(this.life.age++);\n      }\n\n      return results;\n    };\n\n    Particle.prototype.integrate = function (t, dt) {\n      return this.integrateRK4(t, dt);\n    };\n\n    Particle.prototype.forces = function (state, t) {\n      return {\n        force: new Vector()\n      };\n    };\n\n    Particle.prototype.impulse = function (force_dt) {\n      this.momentum.add(force_dt);\n      return this.velocity = this.momentum.$divide(this.mass);\n    };\n\n    Particle.prototype._evaluate = function (t, dt, derivative) {\n      var f, state;\n\n      if (dt == null) {\n        dt = 0;\n      }\n\n      if (derivative == null) {\n        derivative = false;\n      }\n\n      if (dt !== 0 && derivative) {\n        state = {\n          position: this.$add(derivative.velocity.$multiply(dt)),\n          momentum: this.momentum.$add(derivative.force.$multiply(dt))\n        };\n      } else {\n        state = {\n          position: new Vector(this),\n          momentum: new Vector(this.momentum)\n        };\n      }\n\n      state.velocity = state.momentum.$divide(this.mass);\n      f = this.forces(state, t + dt);\n      return {\n        velocity: state.velocity,\n        force: f.force\n      };\n    };\n\n    Particle.prototype.integrateRK4 = function (t, dt) {\n      var _map, a, b, c, d;\n\n      _map = function _map(m1, m2, m3, m4) {\n        var v;\n        v = new Vector((m1.x + 2 * (m2.x + m3.x) + m4.x) / 6, (m1.y + 2 * (m2.y + m3.y) + m4.y) / 6, (m1.z + 2 * (m2.z + m3.z) + m4.z) / 6);\n        return v;\n      };\n\n      a = this._evaluate(t, 0);\n      b = this._evaluate(t, dt * 0.5, a);\n      c = this._evaluate(t, dt * 0.5, b);\n      d = this._evaluate(t, dt, c);\n      this.add(_map(a.velocity, b.velocity, c.velocity, d.velocity));\n      return this.momentum.add(_map(a.force, b.force, c.force, d.force));\n    };\n\n    Particle.prototype.integrateEuler = function (t, dt) {\n      var f;\n      f = this.forces({\n        position: new Vector(this),\n        momentum: new Vector(this.momentum)\n      }, t + dt);\n      this.add(this.velocity);\n      this.momentum.add(f.force);\n      return this.velocity = this.momentum.$divide(this.mass);\n    };\n\n    Particle.prototype.collideLine2d = function (wall, precise) {\n      var collideEndPt, collided, crossed, curr_dist, curr_pos, dot, end_path, next_dist, next_pos, path, perpend, prev_pt_on_wall, proj, pt, pt2, pt_on_wall, pvec, r, tangent, wall_path;\n\n      if (precise == null) {\n        precise = true;\n      }\n\n      curr_pos = new Vector(this);\n      curr_dist = Math.abs(wall.getDistanceFromPoint(curr_pos));\n      collided = Math.abs(curr_dist) < this.radius;\n\n      if (precise) {\n        next_pos = this.$add(this.velocity);\n        next_dist = Math.abs(wall.getDistanceFromPoint(next_pos));\n        crossed = wall.intersectLine(new Line(curr_pos).to(next_pos));\n\n        if (crossed) {\n          next_pos = crossed.$add(this.velocity.$normalize().$multiply(-this.radius / 2));\n          next_dist = Math.abs(wall.getDistanceFromPoint(next_pos));\n          collided = true;\n        }\n      }\n\n      if (collided) {\n        pt_on_wall = wall.getPerpendicularFromPoint(curr_pos);\n        wall_path = wall.$subtract(wall.p1);\n        collideEndPt = false;\n\n        if (!wall.withinBounds(pt_on_wall, Const.xy)) {\n          if (this.intersectPoint(wall)) {\n            collideEndPt = true;\n            end_path = this.$subtract(wall);\n          }\n\n          if (this.intersectPoint(wall.p1)) {\n            collideEndPt = true;\n            end_path = this.$subtract(wall.p1);\n          }\n\n          if (collideEndPt) {\n            wall_path = new Vector(-end_path.y, end_path.x);\n          } else {\n            return false;\n          }\n        }\n\n        dot = wall_path.dot(this.velocity);\n        proj = wall_path.$multiply(dot / wall_path.dot(wall_path));\n        tangent = proj.$subtract(this.velocity);\n        this.velocity = proj.$add(tangent);\n        this.momentum = this.velocity.$multiply(this.mass);\n\n        if (precise && !collideEndPt) {\n          perpend = new Line(pt_on_wall).to(curr_pos);\n          prev_pt_on_wall = wall.getPerpendicularFromPoint(next_pos);\n          path = new Line(pt_on_wall).to(prev_pt_on_wall);\n          pvec = path.direction();\n          r = (this.radius - curr_dist) / (next_dist - curr_dist);\n          pt = pvec.$multiply(r).$add(path);\n          pt2 = pt.$add(perpend.direction().$normalize().$multiply(this.radius));\n          this.set(pt2.$add(this.velocity.$normalize()));\n        }\n      }\n\n      return collided;\n    };\n\n    Particle.prototype.collideWithinBounds = function (bound) {\n      if (this.x - this.radius < bound.x || this.x + this.radius > bound.p1.x) {\n        if (this.x - this.radius < bound.x) {\n          this.x = bound.x + this.radius;\n        } else if (this.x + this.radius > bound.p1.x) {\n          this.x = bound.p1.x - this.radius;\n        }\n\n        this.velocity.x *= -1;\n        this.momentum = this.velocity.$multiply(this.mass);\n        return true;\n      } else if (this.y - this.radius < bound.y || this.y + this.radius > bound.p1.y) {\n        if (this.y - this.radius < bound.y) {\n          this.y = bound.y + this.radius;\n        } else if (this.y + this.radius > bound.p1.y) {\n          this.y = bound.p1.y - this.radius;\n        }\n\n        this.velocity.y *= -1;\n        this.momentum = this.velocity.$multiply(this.mass);\n        return true;\n      }\n\n      return false;\n    };\n\n    Particle.prototype.collideParticle2d = function (pb) {\n      if (this.hasIntersect(pb)) {\n        return Particle.collideParticle2d(this, pb, true);\n      } else {\n        return false;\n      }\n    };\n\n    Particle.collideParticle2d = function (pa, pb, update, checkOverlap) {\n      var d1, d2, dir, dot1n, dot1t, dot2n, dot2t, mag, magDiff, normal, pav, pbv, tangent, v1n, v1t, v2n, v2t;\n\n      if (update == null) {\n        update = true;\n      }\n\n      if (checkOverlap == null) {\n        checkOverlap = true;\n      }\n\n      normal = pa.$subtract(pb).normalize();\n      tangent = new Vector(-normal.y, normal.x);\n      dot1n = normal.dot(pa.velocity);\n      dot1t = tangent.dot(pa.velocity);\n      dot2n = normal.dot(pb.velocity);\n      dot2t = tangent.dot(pb.velocity);\n      d1 = (dot1n * (pa.mass - pb.mass) + 2 * pb.mass * dot2n) / (pa.mass + pb.mass);\n      d2 = (dot2n * (pb.mass - pa.mass) + 2 * pa.mass * dot1n) / (pa.mass + pb.mass);\n      v1n = normal.$multiply(d1);\n      v1t = tangent.$multiply(dot1t);\n      v2n = normal.$multiply(d2);\n      v2t = tangent.$multiply(dot2t);\n      pav = v1n.$add(v1t);\n      pbv = v2n.$add(v2t);\n\n      if (checkOverlap) {\n        mag = pa.magnitude(pb);\n\n        if (mag < pa.radius + pb.radius) {\n          dir = pa.$subtract(pb).normalize();\n          magDiff = Math.abs(mag - pa.radius - pb.radius) / 1.98;\n          pa.add(dir.multiply(magDiff));\n          pb.add(dir.multiply(-magDiff));\n        }\n      }\n\n      if (update) {\n        pa.velocity = pav;\n        pb.velocity = pbv;\n        pa.momentum = pa.velocity.$multiply(pa.mass);\n        pb.momentum = pb.velocity.$multiply(pb.mass);\n      }\n\n      return [pav, pbv];\n    };\n\n    Particle.force_gravitation = function (state, t, pa, pb, g) {\n      var d, force, mag, meterToPixel;\n\n      if (g == null) {\n        g = 0.0067;\n      }\n\n      meterToPixel = 30;\n      d = pb.$subtract(state.position);\n      mag = d.magnitude() / meterToPixel;\n      force = mag === 0 ? 0 : t * g * pa.mass * pb.mass / (mag * mag);\n      d.normalize().multiply(force);\n      return {\n        force: d\n      };\n    };\n\n    Particle.RK4 = function (c, d, func, dt, t) {\n      var a1, a2, a3, c1, c2, c3, c4, d1, d2, d3, d4, dc, dd;\n      c1 = c;\n      d1 = d;\n      a1 = func(c1, d1, 0, t);\n      c2 = c + 0.5 * d1 * dt;\n      d2 = d + 0.5 * a1 * dt;\n      a2 = func(c2, d2, dt / 2, t);\n      c3 = c + 0.5 * d2 * dt;\n      d3 = d + 0.5 * a2 * dt;\n      a3 = func(c3, d3, dt / 2, t);\n      c4 = c + d3 * dt;\n      d4 = d + a3 * dt;\n      dc = (c1 + 2 * (c2 + c3) + c4) / 6;\n      dd = (d1 + 2 * (d2 + d3) + d4) / 6;\n      return {\n        c: c + dc * dt,\n        d: d + dd * dt\n      };\n    };\n\n    return Particle;\n  }(Circle);\n\n  this.Particle = Particle;\n\n  ParticleSystem = function () {\n    function ParticleSystem() {\n      this.count = 0;\n      this.particles = [];\n      this.time = 0;\n    }\n\n    ParticleSystem.prototype.add = function (particle) {\n      particle.id = this.count++;\n      this.particles.push(particle);\n      return this;\n    };\n\n    ParticleSystem.prototype.remove = function (particle) {\n      if (particle && particle.life) {\n        particle.life.complete = true;\n      }\n\n      return this;\n    };\n\n    ParticleSystem.prototype.animate = function (time, frame, ctx) {\n      var _remove, aa, ab, i, index, len1, len2, p, ref, results;\n\n      this.time++;\n      _remove = [];\n      ref = this.particles;\n\n      for (i = aa = 0, len1 = ref.length; aa < len1; i = ++aa) {\n        p = ref[i];\n\n        if (p.life.complete) {\n          _remove.push(i);\n        } else if (p.life.active) {\n          p.animate(time, frame, ctx);\n        }\n      }\n\n      if (_remove.length > 0) {\n        results = [];\n\n        for (ab = 0, len2 = _remove.length; ab < len2; ab++) {\n          index = _remove[ab];\n          results.push(this.particles.splice(index, 1));\n        }\n\n        return results;\n      }\n    };\n\n    return ParticleSystem;\n  }();\n\n  this.ParticleSystem = ParticleSystem;\n\n  Pair = function (superClass) {\n    extend(Pair, superClass);\n\n    function Pair() {\n      Pair.__super__.constructor.apply(this, arguments);\n\n      this.p1 = new Vector(this.x, this.y, this.z);\n\n      if (arguments.length === 4) {\n        this.z = 0;\n        this.p1.set(arguments[2], arguments[3]);\n      } else if (arguments.length === 6) {\n        this.p1.set(arguments[3], arguments[4], arguments[5]);\n      }\n    }\n\n    Pair.prototype.to = function () {\n      this.p1 = new Vector(Point.get(arguments));\n      return this;\n    };\n\n    Pair.prototype.getAt = function (index) {\n      if (index === 1 || index === \"p1\") {\n        return this.p1;\n      }\n\n      return this;\n    };\n\n    Pair.prototype.$getAt = function (index) {\n      return new Vector(this.getAt(index));\n    };\n\n    Pair.prototype.relative = function () {\n      this.p1.add(this);\n      return this;\n    };\n\n    Pair.prototype.$relative = function () {\n      return this.$add(this.p1);\n    };\n\n    Pair.prototype.bounds = function () {\n      return new Pair(this.$min(this.p1)).to(this.$max(this.p1));\n    };\n\n    Pair.prototype.withinBounds = function (pt, axis) {\n      var a, b;\n\n      if (axis) {\n        a = this.get2D(axis);\n        b = this.p1.get2D(axis);\n\n        if (a.x === b.x) {\n          return pt.y >= Math.min(a.y, b.y) && pt.y <= Math.max(a.y, b.y);\n        } else if (a.y === b.y) {\n          return pt.x >= Math.min(a.x, b.x) && pt.x <= Math.max(a.x, b.x);\n        } else {\n          return pt.x >= Math.min(a.x, b.x) && pt.y >= Math.min(a.y, b.y) && pt.x <= Math.max(a.x, b.x) && pt.y <= Math.max(a.y, b.y);\n        }\n      } else {\n        return pt.x >= Math.min(this.x, this.p1.x) && pt.y >= Math.min(this.y, this.p1.y) && pt.z >= Math.min(this.z, this.p1.z) && pt.x <= Math.max(this.x, this.p1.x) && pt.y <= Math.max(this.y, this.p1.y) && pt.z <= Math.max(this.z, this.p1.z);\n      }\n    };\n\n    Pair.prototype.interpolate = function (t, relative) {\n      var p2;\n\n      if (relative == null) {\n        relative = false;\n      }\n\n      p2 = relative ? this.$relative() : this.p1;\n      return new Vector((1 - t) * this.x + t * p2.x, (1 - t) * this.y + t * p2.y, (1 - t) * this.z + t * p2.z);\n    };\n\n    Pair.prototype.midpoint = function () {\n      return this.interpolate(0.5);\n    };\n\n    Pair.prototype.direction = function (reverse) {\n      if (reverse) {\n        return this.$subtract(this.p1);\n      } else {\n        return this.p1.$subtract(this);\n      }\n    };\n\n    Pair.prototype.size = function () {\n      if (arguments.length > 0) {\n        this.p1 = this.$add(Point.get(arguments));\n        return this;\n      } else {\n        return this.p1.$subtract(this).abs();\n      }\n    };\n\n    Pair.prototype.length = function (sqrt) {\n      var d, dx, dy, dz;\n\n      if (sqrt == null) {\n        sqrt = true;\n      }\n\n      dz = this.z - this.p1.z;\n      dy = this.y - this.p1.y;\n      dx = this.x - this.p1.x;\n      d = dx * dx + dy * dy + dz * dz;\n\n      if (sqrt) {\n        return Math.sqrt(d);\n      } else {\n        return d;\n      }\n    };\n\n    Pair.prototype.collinear = function (point) {\n      return (this.p1.x - this.x) * (point.y - this.y) - (point.x - this.x) * (this.p1.y - this.y);\n    };\n\n    Pair.prototype.resetBounds = function () {\n      var temp;\n      temp = this.$min(this.p1);\n      this.p1.set(this.$max(this.p1));\n      this.set(temp);\n      return this;\n    };\n\n    Pair.prototype.equal = function (epsilon) {\n      if (epsilon == null) {\n        epsilon = false;\n      }\n\n      if (arguments[0] instanceof Pair) {\n        return Pair.__super__.equal.call(this, arguments[0]) && this.p1.equal(arguments[0].p1);\n      } else {\n        return Pair.__super__.equal.apply(this, arguments);\n      }\n    };\n\n    Pair.prototype.clone = function () {\n      var p;\n      p = new Pair(this);\n      p.to(this.p1.clone());\n      return p;\n    };\n\n    Pair.prototype.floor = function () {\n      Pair.__super__.floor.apply(this, arguments);\n\n      return this.p1.floor();\n    };\n\n    Pair.prototype.toString = function () {\n      return \"Pair of vectors from (\" + this.x + \", \" + this.y + \", \" + this.z + \") to (\" + this.p1.x + \", \" + this.p1.y + \", \" + this.p1.z + \")\";\n    };\n\n    Pair.prototype.toArray = function () {\n      return [this, this.p1];\n    };\n\n    return Pair;\n  }(Vector);\n\n  this.Pair = Pair;\n\n  Line = function (superClass) {\n    extend(Line, superClass);\n\n    function Line() {\n      Line.__super__.constructor.apply(this, arguments);\n    }\n\n    Line.slope = function (a, b, axis) {\n      var p1, p2;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      p1 = a.get2D(axis);\n      p2 = b.get2D(axis);\n\n      if (p2.x - p1.x === 0) {\n        return false;\n      } else {\n        return (p2.y - p1.y) / (p2.x - p1.x);\n      }\n    };\n\n    Line.intercept = function (a, b, axis) {\n      var c, m, p1, p2;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      p1 = a.get2D(axis);\n      p2 = b.get2D(axis);\n\n      if (p2.x - p1.x === 0) {\n        return false;\n      } else {\n        m = (p2.y - p1.y) / (p2.x - p1.x);\n        c = p1.y - m * p1.x;\n        return {\n          slope: m,\n          yi: c,\n          xi: m === 0 ? false : -c / m\n        };\n      }\n    };\n\n    Line.isPerpendicularLine = function (line1, line2, axis) {\n      var s1, s2;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      s1 = Line.slope(line1, line1.p1, axis);\n      s2 = Line.slope(line2, line2.p1, axis);\n\n      if (s1 === false) {\n        return s2 === 0;\n      } else if (s2 === false) {\n        return s1 === 0;\n      } else {\n        return s1 * s2 === -1;\n      }\n    };\n\n    Line.prototype.slope = function (axis) {\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      return Line.slope(this, this.p1, axis);\n    };\n\n    Line.prototype.intercept = function (axis) {\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      return Line.intercept(this, this.p1, axis);\n    };\n\n    Line.prototype.getPerpendicular = function (t, len, reverse, axis) {\n      var line, pn, pp;\n\n      if (len == null) {\n        len = 10;\n      }\n\n      if (reverse == null) {\n        reverse = false;\n      }\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      pn = this.direction().normalize().perpendicular(axis);\n      pp = reverse ? pn[1] : pn[0];\n      line = new Line(this.interpolate(t));\n      line.to(pp.multiply(len).add(line));\n      return line;\n    };\n\n    Line.prototype.getDistanceFromPoint = function (pt) {\n      var normal, path;\n      path = this.$subtract(this.p1);\n      normal = new Vector(-path.y, path.x).normalize();\n      return this.$subtract(pt).dot(normal);\n    };\n\n    Line.prototype.getPerpendicularFromPoint = function (pt, fromProjection) {\n      var proj;\n\n      if (fromProjection == null) {\n        fromProjection = true;\n      }\n\n      proj = this.p1.$subtract(this).projection(pt.$subtract(this));\n\n      if (!fromProjection) {\n        return proj;\n      } else {\n        return proj.add(this);\n      }\n    };\n\n    Line.prototype.intersectPath = function (line, axis) {\n      var a, b, ln, p, px, py, y1;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      a = this.intercept(axis);\n      b = line.intercept(axis);\n      p = this.get2D(axis);\n      ln = line.get2D(axis);\n\n      if (a === false) {\n        if (b === false) {\n          return false;\n        }\n\n        y1 = -b.slope * (ln.x - p.x) + ln.y;\n\n        if (axis === Const.xy) {\n          return new Vector(p.x, y1);\n        } else {\n          return new Vector(p.x, y1).get2D(axis, true);\n        }\n      } else {\n        if (b === false) {\n          y1 = -a.slope * (p.x - ln.x) + p.y;\n          return new Vector(ln.x, y1);\n        } else if (b.slope !== a.slope) {\n          px = (a.slope * p.x - b.slope * ln.x + ln.y - p.y) / (a.slope - b.slope);\n          py = a.slope * (px - p.x) + p.y;\n\n          if (axis === Const.xy) {\n            return new Vector(px, py);\n          } else {\n            return new Vector(px, py).get2D(axis, true);\n          }\n        } else {\n          if (a.yi === b.yi) {\n            return null;\n          } else {\n            return false;\n          }\n        }\n      }\n    };\n\n    Line.prototype.intersectLine = function (line, axis) {\n      var pt;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      pt = this.intersectPath(line, axis);\n\n      if (pt && this.withinBounds(pt, axis) && line.withinBounds(pt, axis)) {\n        return pt;\n      } else {\n        if (pt === null) {\n          return null;\n        } else {\n          return false;\n        }\n      }\n    };\n\n    Line.intersectLines = function (elem, lines, get_pts) {\n      var aa, i, ins, len1, ln, p, pts;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      if (!elem.intersectLine) {\n        throw \"No intersectLine function found in \" + elem.toString();\n      }\n\n      pts = [];\n\n      for (i in lines) {\n        ln = lines[i];\n        ins = elem.intersectLine(ln, get_pts);\n\n        if (ins) {\n          if (!get_pts) {\n            return true;\n          }\n\n          if (ins.length > 0) {\n            for (aa = 0, len1 = ins.length; aa < len1; aa++) {\n              p = ins[aa];\n              pts.push(p);\n            }\n          }\n        }\n      }\n\n      if (get_pts) {\n        return pts;\n      } else {\n        return false;\n      }\n    };\n\n    Line.prototype.intersectGridLine = function (line, path_only, axis) {\n      var a1, a2, b1, b2;\n\n      if (path_only == null) {\n        path_only = false;\n      }\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      a1 = this.get2D(axis);\n      a2 = this.p1.get2D(axis);\n      b1 = line.get2D(axis);\n      b2 = line.p1.get2D(axis);\n\n      if (a2.x - a1.x === 0) {\n        if (b2.y - b1.y === 0 && Util.within(a1.x, b1.x, b2.x)) {\n          if (path_only || Util.within(b1.y, a1.y, a2.y)) {\n            return new Vector(a1.x, b1.y);\n          }\n        }\n      } else if (a2.y - a1.y === 0) {\n        if (b2.x - b1.x === 0 && Util.within(a1.y, b1.y, b2.y)) {\n          if (path_only || Util.within(b1.x, a1.x, a2.x)) {\n            return new Vector(b1.x, a1.y);\n          }\n        }\n      } else {\n        return false;\n      }\n    };\n\n    Line.prototype.subpoints = function (num) {\n      var aa, ref, results, t;\n      results = [];\n\n      for (t = aa = 0, ref = num; 0 <= ref ? aa <= ref : aa >= ref; t = 0 <= ref ? ++aa : --aa) {\n        results.push(this.interpolate(t / num));\n      }\n\n      return results;\n    };\n\n    Line.prototype.clone = function (deep) {\n      return new Line(this).to(this.p1);\n    };\n\n    return Line;\n  }(Pair);\n\n  this.Line = Line;\n\n  Rectangle = function (superClass) {\n    extend(Rectangle, superClass);\n\n    function Rectangle() {\n      Rectangle.__super__.constructor.apply(this, arguments);\n\n      this.center = new Vector();\n    }\n\n    Rectangle.contain = function (pt, ptl, pbr) {\n      return pt.x >= ptl.x && pt.x <= pbr.x && pt.y >= ptl.y && pt.y <= pbr.y && pt.z >= ptl.z && pt.z <= pbr.z;\n    };\n\n    Rectangle.prototype.toString = function () {\n      var s;\n      s = this.size();\n      return \"Rectangle x1 \" + this.x + \", y1 \" + this.y + \", z1 \" + this.z + \", x2 \" + this.p1.x + \", y2 \" + this.p1.y + \", z2 \" + this.p1.z + \", width \" + s.x + \", height \" + s.y;\n    };\n\n    Rectangle.prototype.toPointSet = function () {\n      var c;\n      c = this.corners();\n      return new PointSet(this).to([c.topRight, c.bottomRight, c.bottomLeft, c.topLeft]);\n    };\n\n    Rectangle.prototype.to = function (args) {\n      this.p1 = new Vector(Point.get(arguments));\n      this.resetBounds();\n      this.center = this.midpoint();\n      return this;\n    };\n\n    Rectangle.prototype.setCenter = function (args) {\n      var halfsize;\n\n      if (arguments.length === 0) {\n        this.center = this.midpoint();\n        return;\n      }\n\n      halfsize = this.size().$divide(2);\n      this.center.set(Point.get(arguments));\n      this.set(this.center.$subtract(halfsize));\n      this.p1.set(this.center.$add(halfsize));\n      return this;\n    };\n\n    Rectangle.prototype.resizeTo = function () {\n      this.p1 = new Vector(Point.get(arguments));\n      this.relative();\n      this.center = this.midpoint();\n      return this;\n    };\n\n    Rectangle.prototype.resizeCenterTo = function () {\n      var size;\n      size = new Vector(Point.get(arguments)).divide(2);\n      this.set(this.center.$subtract(size));\n      this.p1.set(this.center.$add(size));\n      return this;\n    };\n\n    Rectangle.prototype.enclose = function (rect) {\n      this.set(this.$min(rect));\n      this.p1.set(this.p1.$max(rect.p1));\n      this.center = this.midpoint();\n      return this;\n    };\n\n    Rectangle.prototype.$enclose = function (rect) {\n      return this.clone().enclose(rect);\n    };\n\n    Rectangle.prototype.isEnclosed = function (rect) {\n      var d, d2;\n      d = this.$subtract(rect).multiply(this.p1.$subtract(rect.p1));\n      d2 = this.size().subtract(rect.size());\n      return d.x <= 0 && d.y <= 0 && d.z <= 0 && d2.x * d2.y >= 0;\n    };\n\n    Rectangle.prototype.isLarger = function (rect) {\n      var s1, s2;\n      s1 = this.size();\n      s2 = rect.size();\n      return s1.x * s1.y > s2.x * s2.y;\n    };\n\n    Rectangle.prototype.intersectPoint = function () {\n      var pt;\n      pt = Point.get(arguments);\n      return pt.x >= this.x && pt.x <= this.p1.x && pt.y >= this.y && pt.y <= this.p1.y && pt.z >= this.z && pt.z <= this.p1.z;\n    };\n\n    Rectangle.prototype.intersectPath = function (line, get_pts) {\n      var aa, len1, p, pts, s, sides;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      sides = this.sides();\n      pts = [];\n\n      for (aa = 0, len1 = sides.length; aa < len1; aa++) {\n        s = sides[aa];\n        p = s.intersectPath(line);\n\n        if (p && this.intersectPoint(p)) {\n          if (get_pts) {\n            pts.push(p);\n          } else {\n            return true;\n          }\n        }\n      }\n\n      if (get_pts) {\n        return pts;\n      } else {\n        return false;\n      }\n    };\n\n    Rectangle.prototype.intersectLine = function (line, get_pts) {\n      var aa, ip1, ip2, lbound, len1, p, pts, s, sides;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      ip1 = this.intersectPoint(line);\n      ip2 = this.intersectPoint(line.p1);\n\n      if (ip1 && ip2) {\n        if (get_pts) {\n          return [];\n        }\n      } else {\n        true;\n      }\n\n      if (!(ip1 || ip2)) {\n        lbound = line.bounds();\n\n        if (!this.intersectRectangle(lbound, false)) {\n          if (get_pts) {\n            return [];\n          } else {\n            return false;\n          }\n        }\n      }\n\n      sides = this.sides();\n      pts = [];\n\n      for (aa = 0, len1 = sides.length; aa < len1; aa++) {\n        s = sides[aa];\n        p = line.intersectLine(s);\n\n        if (p) {\n          if (get_pts) {\n            pts.push(p);\n          } else {\n            return true;\n          }\n        }\n      }\n\n      if (get_pts) {\n        return pts;\n      } else {\n        return false;\n      }\n    };\n\n    Rectangle.prototype.intersectLines = function (lines, get_pts) {\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      return Line.intersectLines(this, lines, get_pts);\n    };\n\n    Rectangle.prototype.intersectRectangle = function (rect, get_pts) {\n      var aa, ab, intersected, len1, len2, p, pts, sa, sb, sidesA, sidesB, xi, yi, zi;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      xi = this.p1.x >= rect.x && this.x <= rect.p1.x;\n      yi = this.p1.y >= rect.y && this.y <= rect.p1.y;\n      zi = this.p1.z >= rect.z && this.z <= rect.p1.z;\n      intersected = xi && yi && zi;\n\n      if (!get_pts) {\n        return intersected;\n      }\n\n      if (this.isEnclosed(rect)) {\n        return get_pts ? [] : true;\n      }\n\n      if (!intersected) {\n        return [];\n      }\n\n      sidesA = this.sides();\n      sidesB = rect.sides();\n      pts = [];\n\n      for (aa = 0, len1 = sidesA.length; aa < len1; aa++) {\n        sa = sidesA[aa];\n\n        for (ab = 0, len2 = sidesB.length; ab < len2; ab++) {\n          sb = sidesB[ab];\n          p = sa.intersectGridLine(sb);\n\n          if (p) {\n            pts.push(p);\n          }\n        }\n      }\n\n      return pts;\n    };\n\n    Rectangle.prototype.hasIntersect = function (item, get_pts) {\n      if (get_pts == null) {\n        get_pts = false;\n      }\n\n      if (item instanceof Circle) {\n        return item.intersectLines(this.sides(), get_pts);\n      } else if (item instanceof Rectangle) {\n        return this.intersectRectangle(item, get_pts);\n      } else if (item instanceof PointSet || item instanceof Triangle) {\n        return this.intersectLines(item.sides(), get_pts);\n      } else if (item instanceof Pair) {\n        return this.intersectLine(item, get_pts);\n      } else if (item instanceof Point) {\n        return Rectangle.contain(item, this, this.p1);\n      } else {\n        if (get_pts) {\n          return [];\n        } else {\n          return false;\n        }\n      }\n    };\n\n    Rectangle.prototype.corners = function () {\n      return {\n        topLeft: new Vector(Math.min(this.x, this.p1.x), Math.min(this.y, this.p1.y), Math.max(this.z, this.p1.z)),\n        topRight: new Vector(Math.max(this.x, this.p1.x), Math.min(this.y, this.p1.y), Math.min(this.z, this.p1.z)),\n        bottomLeft: new Vector(Math.min(this.x, this.p1.x), Math.max(this.y, this.p1.y), Math.max(this.z, this.p1.z)),\n        bottomRight: new Vector(Math.max(this.x, this.p1.x), Math.max(this.y, this.p1.y), Math.min(this.z, this.p1.z))\n      };\n    };\n\n    Rectangle.prototype.sides = function () {\n      var c;\n      c = this.corners();\n      return [new Line(c.topLeft).to(c.topRight), new Line(c.topRight).to(c.bottomRight), new Line(c.bottomRight).to(c.bottomLeft), new Line(c.bottomLeft).to(c.topLeft)];\n    };\n\n    Rectangle.prototype.quadrants = function () {\n      var c;\n      c = this.corners();\n      return {\n        topLeft: new this.__proto__.constructor(c.topLeft).to(this.center),\n        topRight: new this.__proto__.constructor(c.topRight).to(this.center),\n        bottomLeft: new this.__proto__.constructor(c.bottomLeft).to(this.center),\n        bottomRight: new this.__proto__.constructor(c.bottomRight).to(this.center)\n      };\n    };\n\n    Rectangle.prototype.clone = function () {\n      var p;\n      p = new Rectangle(this).to(this.p1);\n      p.to(this.p1.clone());\n      return p;\n    };\n\n    return Rectangle;\n  }(Pair);\n\n  this.Rectangle = Rectangle;\n\n  Grid = function (superClass) {\n    extend(Grid, superClass);\n\n    function Grid() {\n      Grid.__super__.constructor.apply(this, arguments);\n\n      this.cell = {\n        type: 'fix-fix',\n        size: new Vector()\n      };\n      this.rows = 0;\n      this.columns = 0;\n      this.layout = [];\n      this.cellCallback = null;\n    }\n\n    Grid.prototype.toString = function () {\n      var s;\n      s = this.size();\n      return \"Grid width \" + s.x + \", height \" + s.y + \", columns \" + this.columns + \", rows \" + this.rows + \", \" + (\"cell (\" + this.cell.size.x + \", \" + this.cell.size.y + \"), type \" + this.cell.type);\n    };\n\n    Grid.prototype.init = function (x, y, xtype, ytype) {\n      var size;\n\n      if (xtype == null) {\n        xtype = 'fix';\n      }\n\n      if (ytype == null) {\n        ytype = 'fix';\n      }\n\n      size = this.size();\n      this.cell.type = xtype + '-' + ytype;\n      this.rows = y;\n      this.columns = x;\n\n      if (xtype === 'stretch') {\n        this.cell.size.x = size.x / x;\n        this.columns = x;\n      } else if (xtype === 'flex') {\n        this.columns = Math.round(size.x / x);\n        this.cell.size.x = size.x / this.columns;\n      } else {\n        this.cell.size.x = x;\n        this.columns = Math.floor(size.x / this.cell.size.x);\n      }\n\n      if (ytype === 'stretch') {\n        this.cell.size.y = size.y / y;\n        this.rows = y;\n      } else if (ytype === 'flex') {\n        this.rows = Math.round(size.y / y);\n        this.cell.size.y = size.y / this.rows;\n      } else {\n        this.cell.size.y = y;\n        this.rows = Math.floor(size.y / this.cell.size.y);\n      }\n\n      return this;\n    };\n\n    Grid.prototype.generate = function (callback) {\n      if (typeof callback === \"function\") {\n        this.cellCallback = callback;\n      }\n\n      return this;\n    };\n\n    Grid.prototype.create = function () {\n      var aa, ab, c, cell, isOccupied, pos, r, ref, ref1;\n\n      if (!this.cellCallback) {\n        return this;\n      }\n\n      for (c = aa = 0, ref = this.columns; 0 <= ref ? aa < ref : aa > ref; c = 0 <= ref ? ++aa : --aa) {\n        for (r = ab = 0, ref1 = this.rows; 0 <= ref1 ? ab < ref1 : ab > ref1; r = 0 <= ref1 ? ++ab : --ab) {\n          cell = this.cell.size.clone();\n          pos = this.$add(cell.$multiply(c, r));\n          isOccupied = this.layout.length > 0 && this.layout[0].length > 0 ? this.layout[r][c] === 1 : false;\n          this.cellCallback(cell, pos, r, c, this.cell.type, isOccupied);\n        }\n      }\n\n      return this;\n    };\n\n    Grid.prototype.getCellSize = function () {\n      return this.cell.size.clone();\n    };\n\n    Grid.prototype.cellToRectangle = function (c, r, allowOutofBound) {\n      var rect;\n\n      if (allowOutofBound == null) {\n        allowOutofBound = false;\n      }\n\n      if (allowOutofBound || c >= 0 && c < this.columns && r >= 0 && r < this.rows) {\n        rect = new Rectangle(this.$add(this.cell.size.$multiply(c, r))).resizeTo(this.cell.size);\n        return rect;\n      } else {\n        return false;\n      }\n    };\n\n    Grid.prototype.positionToCell = function (args) {\n      var cellpos, pos;\n      pos = new Vector(this._getArgs(arguments));\n      cellpos = pos.$subtract(this).$divide(this.cell.size).floor();\n      cellpos.max(0, 0).min(this.columns - 1, this.rows - 1);\n      return cellpos;\n    };\n\n    Grid.prototype.resetLayout = function (callback) {\n      var aa, ab, c, r, ref, ref1;\n      this.layout = [];\n\n      for (r = aa = 0, ref = this.rows; 0 <= ref ? aa < ref : aa > ref; r = 0 <= ref ? ++aa : --aa) {\n        this.layout[r] = [];\n\n        for (c = ab = 0, ref1 = this.columns; 0 <= ref1 ? ab < ref1 : ab > ref1; c = 0 <= ref1 ? ++ab : --ab) {\n          this.layout[r][c] = 0;\n\n          if (callback) {\n            callback(this, r, c);\n          }\n        }\n      }\n\n      return this;\n    };\n\n    Grid.prototype.occupy = function (x, y, w, h, occupy) {\n      var aa, ab, c, r, ref, ref1;\n\n      if (occupy == null) {\n        occupy = true;\n      }\n\n      if (this.rows <= 0 || this.columns <= 0) {\n        return this;\n      }\n\n      if (this.layout.length < 1) {\n        this.resetLayout();\n      }\n\n      for (c = aa = 0, ref = w; 0 <= ref ? aa < ref : aa > ref; c = 0 <= ref ? ++aa : --aa) {\n        for (r = ab = 0, ref1 = h; 0 <= ref1 ? ab < ref1 : ab > ref1; r = 0 <= ref1 ? ++ab : --ab) {\n          this.layout[Math.min(this.layout.length - 1, y + r)][x + c] = occupy ? 1 : 0;\n        }\n      }\n\n      return this;\n    };\n\n    Grid.prototype.canFit = function (x, y, w, h) {\n      var aa, ab, cell, currCol, currRow, ref, ref1, ref2, ref3;\n\n      for (currRow = aa = ref = y, ref1 = Math.min(this.rows, y + h); ref <= ref1 ? aa < ref1 : aa > ref1; currRow = ref <= ref1 ? ++aa : --aa) {\n        for (currCol = ab = ref2 = x, ref3 = Math.min(this.columns, x + w); ref2 <= ref3 ? ab < ref3 : ab > ref3; currCol = ref2 <= ref3 ? ++ab : --ab) {\n          cell = this.layout[currRow][currCol];\n\n          if (cell != null && cell > 0) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    };\n\n    Grid.prototype.fit = function (cols, rows) {\n      var aa, ab, b, cell, colCount, colSize, currCol, currRow, freeCol, ref, ref1;\n      colSize = Math.min(cols, this.columns);\n\n      for (currRow = aa = 0, ref = this.rows; 0 <= ref ? aa < ref : aa > ref; currRow = 0 <= ref ? ++aa : --aa) {\n        colCount = colSize;\n        freeCol = 0;\n\n        for (currCol = ab = 0, ref1 = this.columns; 0 <= ref1 ? ab < ref1 : ab > ref1; currCol = 0 <= ref1 ? ++ab : --ab) {\n          cell = this.layout[currRow][currCol];\n\n          if (cell != null && cell > 0) {\n            freeCol++;\n            colCount = colSize;\n          } else {\n            colCount--;\n\n            if (colCount <= 0) {\n              this.occupy(freeCol, currRow, colSize, rows);\n              b = new Rectangle(this.$add(this.cell.size.$multiply(freeCol, currRow)));\n              b.resizeTo(this.cell.size.$multiply(colSize, rows));\n              return {\n                row: currRow,\n                column: freeCol,\n                columnSize: colSize,\n                rowSize: rows,\n                bound: b\n              };\n            }\n          }\n        }\n      }\n\n      return false;\n    };\n\n    Grid.prototype.neighbors = function (c, r) {\n      var aa, len1, n, ns, temp;\n      temp = [[c - 1, r - 1], [c, r - 1], [c + 1, r - 1], [c + 1, r], [c + 1, r + 1], [c, r + 1], [c - 1, r + 1], [c - 1, r]];\n      ns = [];\n\n      for (aa = 0, len1 = temp.length; aa < len1; aa++) {\n        n = temp[aa];\n\n        if (n[0] >= 0 && n[0] < this.columns && n[1] >= 0 && n[1] < this.rows) {\n          ns.push(new Vector(n[0], n[1], this.layout[n[1]][n[0]]));\n        } else {\n          ns.push(false);\n        }\n      }\n\n      return ns;\n    };\n\n    return Grid;\n  }(Rectangle);\n\n  this.Grid = Grid;\n\n  PointSet = function (superClass) {\n    extend(PointSet, superClass);\n\n    function PointSet() {\n      PointSet.__super__.constructor.apply(this, arguments);\n\n      this.points = [];\n    }\n\n    PointSet.prototype.toString = function () {\n      var aa, len1, p, ref, str;\n      str = \"PointSet [ \";\n      ref = this.points;\n\n      for (aa = 0, len1 = ref.length; aa < len1; aa++) {\n        p = ref[aa];\n        str += p.x + \",\" + p.y + \",\" + p.z + \", \";\n      }\n\n      return str + \" ]\";\n    };\n\n    PointSet.prototype.toArray = function () {\n      return this.points.slice();\n    };\n\n    PointSet.prototype.to = function (args) {\n      var aa, len1, p, ref;\n\n      if (arguments.length > 0) {\n        if (Array.isArray(arguments[0]) && arguments[0].length > 0 && typeof arguments[0][0] === 'object') {\n          ref = arguments[0];\n\n          for (aa = 0, len1 = ref.length; aa < len1; aa++) {\n            p = ref[aa];\n            this.points.push(new Vector(p));\n          }\n        } else {\n          this.points.push(new Vector(Point.get(arguments)));\n        }\n      }\n\n      return this;\n    };\n\n    PointSet.prototype.getAt = function (index) {\n      return this.points[Math.min(this.points.length - 1, Math.max(0, index))];\n    };\n\n    PointSet.prototype.$getAt = function (index) {\n      return new Vector(this.getAt(index));\n    };\n\n    PointSet.prototype.setAt = function (index, p) {\n      this.points[index] = p;\n      return this;\n    };\n\n    PointSet.prototype.count = function () {\n      return this.points.length;\n    };\n\n    PointSet.prototype.connectFromAnchor = function (args) {\n      var aa, len1, p, ref;\n\n      if (arguments.length > 0) {\n        if (Array.isArray(arguments[0]) && arguments[0].length > 0) {\n          ref = arguments[0];\n\n          for (aa = 0, len1 = ref.length; aa < len1; aa++) {\n            p = ref[aa];\n            this.points.push(this.$add(p));\n          }\n        } else {\n          this.points.push(this.$add(Point.get(arguments)));\n        }\n      }\n\n      return this;\n    };\n\n    PointSet.prototype.disconnect = function (index) {\n      if (index == null) {\n        index = -1;\n      }\n\n      if (index < 0) {\n        this.points = this.points.slice(0, this.points.length + index);\n      } else {\n        this.points = this.points.slice(index + 1);\n      }\n\n      return this;\n    };\n\n    PointSet.prototype.sides = function (close_path) {\n      var aa, lastP, len1, p, ref, sides;\n\n      if (close_path == null) {\n        close_path = true;\n      }\n\n      lastP = null;\n      sides = [];\n      ref = this.points;\n\n      for (aa = 0, len1 = ref.length; aa < len1; aa++) {\n        p = ref[aa];\n\n        if (lastP) {\n          sides.push(new Line(lastP).to(p));\n        }\n\n        lastP = p;\n      }\n\n      if (this.points.length > 1 && close_path) {\n        sides.push(new Line(lastP).to(this.points[0]));\n      }\n\n      return sides;\n    };\n\n    PointSet.prototype.angles = function (axis) {\n      var aa, angles, i, ref, v1, v2;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      angles = [];\n\n      for (i = aa = 1, ref = this.points.length - 1; aa < ref; i = aa += 1) {\n        v1 = this.points[i - 1].$subtract(this.points[i]);\n        v2 = this.points[i + 1].$subtract(this.points[i]);\n        angles.push({\n          p0: this.points[i - 1],\n          p1: this.points[i],\n          p2: this.points[i + 1],\n          angle: v1.angleBetween(v2)\n        });\n      }\n\n      return angles;\n    };\n\n    PointSet.prototype.bounds = function () {\n      return Util.boundingBox(this.points);\n    };\n\n    PointSet.prototype.centroid = function () {\n      return Util.centroid(this.points);\n    };\n\n    PointSet.prototype.convexHull = function (sort) {\n      var dq, i, left, pt, pts;\n\n      if (sort == null) {\n        sort = true;\n      }\n\n      if (this.points.length < 3) {\n        return [];\n      }\n\n      if (sort) {\n        pts = this.points.slice();\n        pts.sort(function (a, b) {\n          return a.x - b.x;\n        });\n      } else {\n        pts = this.points;\n      }\n\n      left = function left(a, b, pt) {\n        return (b.x - a.x) * (pt.y - a.y) - (pt.x - a.x) * (b.y - a.y) > 0;\n      };\n\n      dq = [];\n\n      if (left(pts[0], pts[1], pts[2])) {\n        dq.push(pts[0]);\n        dq.push(pts[1]);\n      } else {\n        dq.push(pts[1]);\n        dq.push(pts[0]);\n      }\n\n      dq.unshift(pts[2]);\n      dq.push(pts[2]);\n      i = 3;\n\n      while (i < pts.length) {\n        pt = pts[i];\n\n        if (left(pt, dq[0], dq[1]) && left(dq[dq.length - 2], dq[dq.length - 1], pt)) {\n          i++;\n          continue;\n        }\n\n        while (!left(dq[dq.length - 2], dq[dq.length - 1], pt)) {\n          dq.pop();\n        }\n\n        dq.push(pt);\n\n        while (!left(dq[0], dq[1], pt)) {\n          dq.shift();\n        }\n\n        dq.unshift(pt);\n        i++;\n      }\n\n      return dq;\n    };\n\n    PointSet.prototype.clone = function () {\n      return new PointSet(this).to(Util.clonePoints(this.points));\n    };\n\n    return PointSet;\n  }(Vector);\n\n  this.PointSet = PointSet;\n\n  Curve = function (superClass) {\n    extend(Curve, superClass);\n\n    function Curve() {\n      Curve.__super__.constructor.apply(this, arguments);\n\n      this.is3D = false;\n    }\n\n    Curve.prototype._getSteps = function (steps) {\n      var aa, ref, s, t, ts;\n      ts = [];\n\n      for (s = aa = 0, ref = steps; aa <= ref; s = aa += 1) {\n        t = s / steps;\n        ts.push([t, t * t, t * t * t]);\n      }\n\n      return ts;\n    };\n\n    Curve.prototype.controlPoints = function (index, copyStart) {\n      var _index, p0, p1, p2, p3;\n\n      if (index == null) {\n        index = 0;\n      }\n\n      if (copyStart == null) {\n        copyStart = false;\n      }\n\n      _index = function (_this) {\n        return function (i) {\n          var idx;\n          idx = i < _this.points.length - 1 ? i : _this.points.length - 1;\n          return idx;\n        };\n      }(this);\n\n      p0 = this.points[index];\n\n      if (p0.x == null) {\n        return false;\n      }\n\n      index = copyStart ? index : index + 1;\n      p1 = this.points[_index(index++)];\n      p2 = this.points[_index(index++)];\n      p3 = this.points[_index(index++)];\n      return {\n        p0: p0,\n        p1: p1,\n        p2: p2,\n        p3: p3\n      };\n    };\n\n    Curve.prototype.catmullRom = function (steps) {\n      var aa, ab, c, i, k, ps, ref, ref1, ts;\n\n      if (steps == null) {\n        steps = 10;\n      }\n\n      if (this.points.length < 2) {\n        return [];\n      }\n\n      ps = [];\n      ts = this._getSteps(steps);\n      c = this.controlPoints(0, true);\n\n      for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\n        ps.push(this.catmullRomPoint(ts[i], c));\n      }\n\n      k = 0;\n\n      while (k < this.points.length - 2) {\n        c = this.controlPoints(k);\n\n        if (c) {\n          for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\n            ps.push(this.catmullRomPoint(ts[i], c));\n          }\n\n          k++;\n        }\n      }\n\n      return ps;\n    };\n\n    Curve.prototype.catmullRomPoint = function (step, ctrls) {\n      var h1, h2, h3, h4, t, t2, t3, x, y, z;\n      t = step[0];\n      t2 = step[1];\n      t3 = step[2];\n      h1 = -0.5 * t3 + t2 - 0.5 * t;\n      h2 = 1.5 * t3 - 2.5 * t2 + 1;\n      h3 = -1.5 * t3 + 2 * t2 + 0.5 * t;\n      h4 = 0.5 * t3 - 0.5 * t2;\n      x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\n      y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\n      z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\n      return new Point(x, y, z);\n    };\n\n    Curve.prototype.cardinal = function (steps, tension) {\n      var aa, ab, c, i, k, ps, ref, ref1, ts;\n\n      if (steps == null) {\n        steps = 10;\n      }\n\n      if (tension == null) {\n        tension = 0.5;\n      }\n\n      if (this.points.length < 2) {\n        return [];\n      }\n\n      ps = [];\n      ts = this._getSteps(steps);\n      c = this.controlPoints(0, true);\n\n      for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\n        ps.push(this.cardinalPoint(ts[i], c, tension));\n      }\n\n      k = 0;\n\n      while (k < this.points.length - 2) {\n        c = this.controlPoints(k);\n\n        if (c) {\n          for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\n            ps.push(this.cardinalPoint(ts[i], c, tension));\n          }\n\n          k++;\n        }\n      }\n\n      return ps;\n    };\n\n    Curve.prototype.cardinalPoint = function (step, ctrls, tension) {\n      var h1, h2, h2a, h3, h3a, h4, t, t2, t3, x, y, z;\n\n      if (tension == null) {\n        tension = 0.5;\n      }\n\n      t = step[0];\n      t2 = step[1];\n      t3 = step[2];\n      h1 = tension * (-1 * t3 + 2 * t2 - t);\n      h2 = tension * (-1 * t3 + t2);\n      h2a = 2 * t3 - 3 * t2 + 1;\n      h3 = tension * (t3 - 2 * t2 + t);\n      h3a = -2 * t3 + 3 * t2;\n      h4 = tension * (t3 - t2);\n      x = ctrls.p0.x * h1 + ctrls.p1.x * h2 + h2a * ctrls.p1.x + ctrls.p2.x * h3 + h3a * ctrls.p2.x + ctrls.p3.x * h4;\n      y = ctrls.p0.y * h1 + ctrls.p1.y * h2 + h2a * ctrls.p1.y + ctrls.p2.y * h3 + h3a * ctrls.p2.y + ctrls.p3.y * h4;\n      z = !this.is3D ? 0 : ctrls.p0.z * h1 + ctrls.p1.z * h2 + h2a * ctrls.p1.z + ctrls.p2.z * h3 + h3a * ctrls.p2.z + ctrls.p3.z * h4;\n      return new Point(x, y, z);\n    };\n\n    Curve.prototype.bezier = function (steps) {\n      var aa, c, i, k, ps, ref, ts;\n\n      if (steps == null) {\n        steps = 10;\n      }\n\n      if (this.points.length < 4) {\n        return [];\n      }\n\n      ps = [];\n      ts = this._getSteps(steps);\n      k = 0;\n\n      while (k <= this.points.length - 3) {\n        c = this.controlPoints(k);\n\n        if (c) {\n          for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\n            ps.push(this.bezierPoint(ts[i], c));\n          }\n\n          k += 3;\n        }\n      }\n\n      return ps;\n    };\n\n    Curve.prototype.bezierPoint = function (step, ctrls) {\n      var h1, h2, h3, h4, t, t2, t3, x, y, z;\n      t = step[0];\n      t2 = step[1];\n      t3 = step[2];\n      h1 = -1 * t3 + 3 * t2 - 3 * t + 1;\n      h2 = 3 * t3 - 6 * t2 + 3 * t;\n      h3 = -3 * t3 + 3 * t2;\n      h4 = t3;\n      x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\n      y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\n      z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\n      return new Point(x, y, z);\n    };\n\n    Curve.prototype.bspline = function (steps, tension) {\n      var aa, ab, c, i, k, ps, ref, ref1, ts;\n\n      if (steps == null) {\n        steps = 10;\n      }\n\n      if (tension == null) {\n        tension = false;\n      }\n\n      if (this.points.length < 2) {\n        return [];\n      }\n\n      ps = [];\n      ts = this._getSteps(steps);\n      k = 0;\n\n      while (k < this.points.length - 2) {\n        c = this.controlPoints(k);\n\n        if (c) {\n          if (!tension) {\n            for (i = aa = 0, ref = steps; aa <= ref; i = aa += 1) {\n              ps.push(this.bsplinePoint(ts[i], c));\n            }\n          } else {\n            for (i = ab = 0, ref1 = steps; ab <= ref1; i = ab += 1) {\n              ps.push(this.bsplineTensionPoint(ts[i], c, tension));\n            }\n          }\n\n          k++;\n        }\n      }\n\n      return ps;\n    };\n\n    Curve.prototype.bsplinePoint = function (step, ctrls) {\n      var h1, h2, h3, h4, t, t2, t3, x, y, z;\n      t = step[0];\n      t2 = step[1];\n      t3 = step[2];\n      h1 = -0.16666666666 * t3 + 0.5 * t2 - 0.5 * t + 0.16666666666;\n      h2 = 0.5 * t3 - t2 + 0.66666666666;\n      h3 = -0.5 * t3 + 0.5 * t2 + 0.5 * t + 0.16666666666;\n      h4 = 0.16666666666 * t3;\n      x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h3 * ctrls.p2.x + h4 * ctrls.p3.x;\n      y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h3 * ctrls.p2.y + h4 * ctrls.p3.y;\n      z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h3 * ctrls.p2.z + h4 * ctrls.p3.z;\n      return new Point(x, y, z);\n    };\n\n    Curve.prototype.bsplineTensionPoint = function (step, ctrls, tension) {\n      var h1, h2, h2a, h3, h3a, h4, t, t2, t3, x, y, z;\n\n      if (tension == null) {\n        tension = 1;\n      }\n\n      t = step[0];\n      t2 = step[1];\n      t3 = step[2];\n      h1 = tension * (-0.16666666666 * t3 + 0.5 * t2 - 0.5 * t + 0.16666666666);\n      h2 = tension * (-1.5 * t3 + 2 * t2 - 0.33333333333);\n      h2a = 2 * t3 - 3 * t2 + 1;\n      h3 = tension * (1.5 * t3 - 2.5 * t2 + 0.5 * t + 0.16666666666);\n      h3a = -2 * t3 + 3 * t2;\n      h4 = tension * (0.16666666666 * t3);\n      x = h1 * ctrls.p0.x + h2 * ctrls.p1.x + h2a * ctrls.p1.x + h3 * ctrls.p2.x + h3a * ctrls.p2.x + h4 * ctrls.p3.x;\n      y = h1 * ctrls.p0.y + h2 * ctrls.p1.y + h2a * ctrls.p1.y + h3 * ctrls.p2.y + h3a * ctrls.p2.y + h4 * ctrls.p3.y;\n      z = !this.is3D ? 0 : h1 * ctrls.p0.z + h2 * ctrls.p1.z + h2a * ctrls.p1.y + h3 * ctrls.p2.z + h3a * ctrls.p2.z + h4 * ctrls.p3.z;\n      return new Point(x, y, z);\n    };\n\n    return Curve;\n  }(PointSet);\n\n  this.Curve = Curve;\n\n  Triangle = function (superClass) {\n    extend(Triangle, superClass);\n\n    function Triangle() {\n      Triangle.__super__.constructor.apply(this, arguments);\n\n      this.p1 = new Vector(this.x - 1, this.y - 1, this.z);\n      this.p2 = new Vector(this.x + 1, this.y + 1, this.z);\n    }\n\n    Triangle.prototype.to = function (args) {\n      if (arguments.length > 0) {\n        if (typeof arguments[0] === 'object' && arguments.length === 2) {\n          this.p1.set(arguments[0]);\n          this.p2.set(arguments[1]);\n        } else {\n          if (arguments.length < 6) {\n            this.p1.set([arguments[0], arguments[1]]);\n            this.p2.set([arguments[2], arguments[3]]);\n          } else {\n            this.p1.set([arguments[0], arguments[1], arguments[2]]);\n            this.p2.set([arguments[3], arguments[4], arguments[5]]);\n          }\n        }\n      }\n\n      return this;\n    };\n\n    Triangle.prototype.toArray = function () {\n      return [this, this.p1, this.p2];\n    };\n\n    Triangle.prototype.toString = function () {\n      return \"Triangle (\" + this.x + \", \" + this.y + \", \" + this.z + \"), (\" + this.p1.x + \", \" + this.p1.y + \", \" + this.p1.z + \"), (\" + this.p2.x + \", \" + this.p2.y + \", \" + this.p2.z + \")\";\n    };\n\n    Triangle.prototype.getAt = function (index) {\n      if (index === 1 || index === \"p1\") {\n        return this.p1;\n      }\n\n      if (index === 2 || index === \"p2\") {\n        return this.p2;\n      }\n\n      return this;\n    };\n\n    Triangle.prototype.$getAt = function (index) {\n      return new Vector(this.getAt(index));\n    };\n\n    Triangle.prototype.toPointSet = function () {\n      var p0;\n      p0 = new Vector(this);\n      return new PointSet(p0).to([p0, this.p1, this.p2]);\n    };\n\n    Triangle.prototype.sides = function () {\n      return [new Line(this).to(this.p1), new Line(this.p1).to(this.p2), new Line(this.p2).to(this)];\n    };\n\n    Triangle.prototype.angles = function (axis) {\n      var angles;\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      angles = [this.p2.$subtract(this).angleBetween(this.p1.$subtract(this), axis), this.$subtract(this.p1).angleBetween(this.p2.$subtract(this.p1), axis)];\n      angles.push(Math.PI - angles[0] - angles[1]);\n      return angles;\n    };\n\n    Triangle.prototype.medial = function () {\n      var pts, side, sides;\n      sides = this.sides();\n\n      pts = function () {\n        var aa, len1, results;\n        results = [];\n\n        for (aa = 0, len1 = sides.length; aa < len1; aa++) {\n          side = sides[aa];\n          results.push(side.midpoint());\n        }\n\n        return results;\n      }();\n\n      return new Triangle(pts[0]).to(pts[1], pts[2]);\n    };\n\n    Triangle.prototype.perimeter = function () {\n      var lens, sides;\n      sides = this.sides();\n      lens = [sides[0].length(), sides[1].length(), sides[2].length()];\n      return {\n        sides: sides,\n        value: lens[0] + lens[1] + lens[2],\n        lengths: lens\n      };\n    };\n\n    Triangle.prototype.area = function () {\n      var hp, p;\n      p = this.perimeter();\n      hp = p.value / 2;\n      return {\n        value: Math.sqrt(hp * (hp - p.lengths[0]) * (hp - p.lengths[1]) * (hp - p.lengths[2])),\n        perimeter: p\n      };\n    };\n\n    Triangle.prototype.oppositeSide = function (id) {\n      if (id === \"p1\") {\n        return new Line(this).to(this.p2);\n      } else if (id === \"p2\") {\n        return new Line(this).to(this.p1);\n      } else {\n        return new Line(this.p1).to(this.p2);\n      }\n    };\n\n    Triangle.prototype.adjacentSides = function (id) {\n      if (id === \"p1\") {\n        return [new Line(this.p1).to(this), new Line(this.p1).to(this.p2)];\n      } else if (id === \"p2\") {\n        return [new Line(this.p2).to(this), new Line(this.p2).to(this.p1)];\n      } else {\n        return [new Line(this).to(this.p1), new Line(this).to(this.p2)];\n      }\n    };\n\n    Triangle.prototype.bisector = function (id, asLine, size) {\n      var ad, bp, p;\n\n      if (asLine == null) {\n        asLine = false;\n      }\n\n      if (size == null) {\n        size = 100;\n      }\n\n      ad = this.adjacentSides(id);\n      p = new Vector(ad[0]);\n      ad[0].moveTo(0, 0);\n      ad[1].moveTo(0, 0);\n      bp = ad[0].p1.bisect(ad[1].p1);\n\n      if (asLine) {\n        return new Line(p).to(bp.multiply(size).add(p));\n      } else {\n        return bp;\n      }\n    };\n\n    Triangle.prototype.altitude = function (id) {\n      if (id === \"p1\" || id === \"p2\") {\n        return new Line(this[id]).to(this.oppositeSide(id).getPerpendicularFromPoint(this[id]));\n      } else {\n        return new Line(this).to(this.oppositeSide().getPerpendicularFromPoint(this));\n      }\n    };\n\n    Triangle.prototype.centroid = function () {\n      var c0, c1, c2;\n      c0 = this.$divide(3);\n      c1 = this.p1.$divide(3);\n      c2 = this.p2.$divide(3);\n      return new Vector(c0.x + c1.x + c2.x, c0.y + c1.y + c2.y, c0.z + c1.z + c2.z);\n    };\n\n    Triangle.prototype.orthocenter = function () {\n      var a, b;\n      a = this.altitude();\n      b = this.altitude(\"p1\");\n      return a.intersectPath(b, Const.xyz);\n    };\n\n    Triangle.prototype.incenter = function () {\n      var a, b;\n      a = this.bisector(\"p0\", true);\n      b = this.bisector(\"p1\", true);\n      return a.intersectPath(b, Const.xyz);\n    };\n\n    Triangle.prototype.incircle = function () {\n      var area, center, radius;\n      center = this.incenter();\n      area = this.area();\n      radius = 2 * area.value / area.perimeter.value;\n      return new Circle(center).setRadius(radius);\n    };\n\n    Triangle.prototype.circumcenter = function () {\n      var medial, pbs;\n      medial = this.medial();\n      pbs = [new Line(medial).to(this.$subtract(medial).perpendicular()[0].$add(medial)), new Line(medial.p1).to(this.p1.$subtract(medial.p1).perpendicular()[0].$add(medial.p1)), new Line(medial.p2).to(this.p2.$subtract(medial.p2).perpendicular()[0].$add(medial.p2))];\n      return {\n        center: pbs[0].intersectPath(pbs[1], Const.xyz),\n        bisectors: pbs\n      };\n    };\n\n    Triangle.prototype.circumcircle = function () {\n      var center, r;\n      center = this.circumcenter();\n      r = this.magnitude(center.center);\n      return new Circle(center.center).setRadius(r);\n    };\n\n    Triangle.prototype.intersectPoint = function (p) {\n      var hp, s, sides;\n      sides = this.sides();\n\n      hp = function () {\n        var aa, len1, results;\n        results = [];\n\n        for (aa = 0, len1 = sides.length; aa < len1; aa++) {\n          s = sides[aa];\n          results.push(s.collinear(p) > 0);\n        }\n\n        return results;\n      }();\n\n      return hp[0] === hp[1] && hp[1] === hp[2];\n    };\n\n    Triangle.prototype.intersectPath = function (path, get_pts, axis) {\n      var aa, len1, p, pts, s, sides;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      sides = this.sides();\n      pts = [];\n\n      for (aa = 0, len1 = sides.length; aa < len1; aa++) {\n        s = sides[aa];\n        p = s.intersectPath(path);\n\n        if (p && s.withinBounds(p, axis)) {\n          if (!get_pts) {\n            return true;\n          }\n\n          pts.push(p);\n        }\n      }\n\n      if (get_pts) {\n        return pts;\n      } else {\n        return false;\n      }\n    };\n\n    Triangle.prototype.intersectLine = function (line, get_pts, axis) {\n      var aa, ins, len1, p, pts;\n\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      if (axis == null) {\n        axis = Const.xy;\n      }\n\n      ins = this.intersectPath(line, true, axis);\n      pts = [];\n\n      for (aa = 0, len1 = ins.length; aa < len1; aa++) {\n        p = ins[aa];\n\n        if (line.withinBounds(p)) {\n          if (!get_pts) {\n            return true;\n          }\n\n          pts.push(p);\n        }\n      }\n\n      if (get_pts) {\n        return pts;\n      } else {\n        return false;\n      }\n    };\n\n    Triangle.prototype.intersectLines = function (lines, get_pts) {\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      return Line.intersectLines(this, lines, get_pts);\n    };\n\n    Triangle.prototype.intersectPath3D = function (path, get_pts) {\n      var det, dir, e1, e2, inv_det, pvec, qvec, t, tvec, u, v;\n      e1 = this.p1.$subtract(this);\n      e2 = this.p2.$subtract(this);\n      dir = path.direction().normalize();\n      pvec = dir.cross(e2);\n      det = e1.dot(pvec);\n\n      if (det > -Const.epsilon && det < Const.epsilon) {\n        return false;\n      }\n\n      inv_det = 1 / det;\n      tvec = path.$subtract(this);\n      u = tvec.dot(pvec) * inv_det;\n\n      if (u < 0 || u > 1) {\n        return false;\n      }\n\n      qvec = tvec.cross(e1);\n      v = dir.dot(qvec) * inv_det;\n\n      if (v < 0 || v > 1) {\n        return false;\n      }\n\n      t = e2.dot(qvec) * inv_det;\n\n      if (t > Const.epsilon) {\n        if (get_pts) {\n          return [u, v, t];\n        } else {\n          return true;\n        }\n      } else {\n        return false;\n      }\n    };\n\n    Triangle.prototype.intersectRectangle = function (rect, get_pts) {\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      return rect.intersectLines(this.sides(), get_pts);\n    };\n\n    Triangle.prototype.intersectCircle = function (circle, get_pts) {\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      return circle.intersectLines(this.sides(), get_pts);\n    };\n\n    Triangle.prototype.intersectTriangle = function (tri, get_pts) {\n      if (get_pts == null) {\n        get_pts = true;\n      }\n\n      return tri.intersectLines(this.sides(), get_pts);\n    };\n\n    Triangle.prototype.clone = function () {\n      return new Triangle(this).to(this.p1, this.p2);\n    };\n\n    return Triangle;\n  }(Vector);\n\n  this.Triangle = Triangle;\n\n  SVGForm = function () {\n    SVGForm._domId = 0;\n\n    function SVGForm(space) {\n      this.cc = space.ctx || {};\n      this.cc.group = this.cc.group || null;\n      this.cc.groupID = \"ptx\";\n      this.cc.groupCount = 0;\n      this.cc.currentID = \"ptx0\";\n      this.cc.style = {\n        fill: \"#999\",\n        stroke: \"#666\",\n        \"stroke-width\": 1,\n        \"stroke-linejoin\": false,\n        \"stroke-linecap\": false\n      };\n      this.cc.font = \"11px sans-serif\";\n      this.cc.fontSize = 11;\n      this.cc.fontFace = \"sans-serif\";\n    }\n\n    SVGForm.prototype.fill = function (c) {\n      this.cc.style.fill = c ? c : false;\n      return this;\n    };\n\n    SVGForm.prototype.stroke = function (c, width, joint, cap) {\n      this.cc.style.stroke = c ? c : false;\n\n      if (width) {\n        this.cc.style[\"stroke-width\"] = width;\n      }\n\n      if (joint) {\n        this.cc.style[\"stroke-linejoin\"] = joint;\n      }\n\n      if (cap) {\n        this.cc.style[\"stroke-linecap\"] = joint;\n      }\n\n      return this;\n    };\n\n    SVGForm.prototype.scope = function (group_id, group) {\n      if (group == null) {\n        group = false;\n      }\n\n      if (group) {\n        this.cc.group = group;\n      }\n\n      this.cc.groupID = group_id;\n      this.cc.groupCount = 0;\n      this.nextID();\n      return this.cc;\n    };\n\n    SVGForm.prototype.getScope = function (item) {\n      if (!item || item.animateID === null) {\n        throw \"getScope()'s item must be added to a Space, and has an animateID property. Otherwise, use scope() instead.\";\n      }\n\n      return this.scope(SVGForm._scopeID(item));\n    };\n\n    SVGForm.prototype.nextID = function () {\n      this.cc.groupCount++;\n      this.cc.currentID = this.cc.groupID + \"-\" + this.cc.groupCount;\n      return this.cc.currentID;\n    };\n\n    SVGForm.id = function (ctx) {\n      return ctx.currentID || \"p-\" + SVGForm._domId++;\n    };\n\n    SVGForm._scopeID = function (item) {\n      return \"item\" + item.animateID;\n    };\n\n    SVGForm.style = function (elem, styles) {\n      var k, st, v;\n      st = {};\n\n      for (k in styles) {\n        v = styles[k];\n\n        if (!v) {\n          if (k === \"fill\" || k === \"stroke\") {\n            st[k] = \"none\";\n          }\n        } else {\n          st[k] = v;\n        }\n      }\n\n      return DOMSpace.attr(elem, st);\n    };\n\n    SVGForm.point = function (ctx, pt, halfsize, fill, stroke, circle) {\n      var elem;\n\n      if (halfsize == null) {\n        halfsize = 2;\n      }\n\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = true;\n      }\n\n      if (circle == null) {\n        circle = false;\n      }\n\n      elem = SVGSpace.svgElement(ctx.group, circle ? \"circle\" : \"rect\", SVGForm.id(ctx));\n\n      if (!elem) {\n        return;\n      }\n\n      if (circle) {\n        DOMSpace.attr(elem, {\n          cx: pt.x,\n          cy: pt.y,\n          r: halfsize\n        });\n      } else {\n        DOMSpace.attr(elem, {\n          x: pt.x - halfsize,\n          y: pt.y - halfsize,\n          width: halfsize + halfsize,\n          height: halfsize + halfsize\n        });\n      }\n\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    };\n\n    SVGForm.prototype.point = function (p, halfsize, isCircle) {\n      if (halfsize == null) {\n        halfsize = 2;\n      }\n\n      if (isCircle == null) {\n        isCircle = false;\n      }\n\n      this.nextID();\n      SVGForm.point(this.cc, p, halfsize, true, true, isCircle);\n      return this;\n    };\n\n    SVGForm.points = function (ctx, pts, halfsize, fill, stroke, circle) {\n      var p;\n\n      if (halfsize == null) {\n        halfsize = 2;\n      }\n\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = true;\n      }\n\n      if (circle == null) {\n        circle = false;\n      }\n\n      return function () {\n        var aa, len1, results;\n        results = [];\n\n        for (aa = 0, len1 = pts.length; aa < len1; aa++) {\n          p = pts[aa];\n          results.push(SVGForm.point(ctx, p, halfsize, fill, stroke, circle));\n        }\n\n        return results;\n      }();\n    };\n\n    SVGForm.prototype.points = function (ps, halfsize, isCircle) {\n      var aa, len1, p;\n\n      if (halfsize == null) {\n        halfsize = 2;\n      }\n\n      if (isCircle == null) {\n        isCircle = false;\n      }\n\n      for (aa = 0, len1 = ps.length; aa < len1; aa++) {\n        p = ps[aa];\n        this.point(p, halfsize, isCircle);\n      }\n\n      return this;\n    };\n\n    SVGForm.line = function (ctx, pair) {\n      var elem;\n\n      if (!pair.p1) {\n        throw pair.toString() + \" is not a Pair\";\n      }\n\n      elem = SVGSpace.svgElement(ctx.group, \"line\", SVGForm.id(ctx));\n      DOMSpace.attr(elem, {\n        x1: pair.x,\n        y1: pair.y,\n        x2: pair.p1.x,\n        y2: pair.p1.y\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    };\n\n    SVGForm.prototype.line = function (p) {\n      this.nextID();\n      SVGForm.line(this.cc, p);\n      return this;\n    };\n\n    SVGForm.lines = function (ctx, pairs) {\n      var ln;\n      return function () {\n        var aa, len1, results;\n        results = [];\n\n        for (aa = 0, len1 = pairs.length; aa < len1; aa++) {\n          ln = pairs[aa];\n          results.push(SVGForm.line(ctx, ln));\n        }\n\n        return results;\n      }();\n    };\n\n    SVGForm.prototype.lines = function (ps) {\n      var aa, len1, p;\n\n      for (aa = 0, len1 = ps.length; aa < len1; aa++) {\n        p = ps[aa];\n        this.line(p);\n      }\n\n      return this;\n    };\n\n    SVGForm.rect = function (ctx, pair, fill, stroke) {\n      var elem, size;\n\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = true;\n      }\n\n      if (!pair.p1) {\n        throw \"\" + (pair.toString() === !a(Pair));\n      }\n\n      elem = SVGSpace.svgElement(ctx.group, \"rect\", SVGForm.id(ctx));\n      size = pair.size();\n      DOMSpace.attr(elem, {\n        x: pair.x,\n        y: pair.y,\n        width: size.x,\n        height: size.y\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    };\n\n    SVGForm.prototype.rect = function (p, checkBounds) {\n      var r;\n\n      if (checkBounds == null) {\n        checkBounds = true;\n      }\n\n      this.nextID();\n      r = checkBounds ? p.bounds() : p;\n      SVGForm.rect(this.cc, r);\n      return this;\n    };\n\n    SVGForm.circle = function (ctx, c, fill, stroke) {\n      var elem;\n\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = false;\n      }\n\n      elem = SVGSpace.svgElement(ctx.group, \"circle\", SVGForm.id(ctx));\n\n      if (!elem) {\n        return;\n      }\n\n      DOMSpace.attr(elem, {\n        cx: c.x,\n        cy: c.y,\n        r: c.radius\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    };\n\n    SVGForm.prototype.circle = function (c) {\n      this.nextID();\n      SVGForm.circle(this.cc, c);\n      return this;\n    };\n\n    SVGForm.polygon = function (ctx, pts, closePath, fill, stroke) {\n      var elem, i, points;\n\n      if (closePath == null) {\n        closePath = true;\n      }\n\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = true;\n      }\n\n      elem = SVGSpace.svgElement(ctx.group, closePath ? \"polygon\" : \"polyline\", SVGForm.id(ctx));\n\n      if (!elem) {\n        return;\n      }\n\n      if (pts.length <= 1) {\n        return;\n      }\n\n      points = function () {\n        var aa, ref, results;\n        results = [];\n\n        for (i = aa = 0, ref = pts.length; aa < ref; i = aa += 1) {\n          results.push(pts[i].x + \",\" + pts[i].y);\n        }\n\n        return results;\n      }();\n\n      DOMSpace.attr(elem, {\n        points: points.join(\" \")\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    };\n\n    SVGForm.prototype.polygon = function (ps, closePath) {\n      this.nextID();\n      SVGForm.polygon(this.cc, ps, closePath);\n      return this;\n    };\n\n    SVGForm.triangle = function (ctx, tri, fill, stroke) {\n      if (fill == null) {\n        fill = true;\n      }\n\n      if (stroke == null) {\n        stroke = false;\n      }\n\n      return SVGForm.polygon(ctx, tri.toArray());\n    };\n\n    SVGForm.prototype.triangle = function (tri) {\n      this.nextID();\n      SVGForm.triangle(this.cc, tri);\n      return this;\n    };\n\n    SVGForm.curve = function (ctx, pts, closePath) {\n      if (closePath == null) {\n        closePath = false;\n      }\n\n      return SVGForm.polygon(ctx, pts, closePath);\n    };\n\n    SVGForm.prototype.curve = function (ps, closePath) {\n      if (closePath == null) {\n        closePath = false;\n      }\n\n      this.nextID();\n      SVGForm.curve(this.cc, ps, closePath);\n      return this;\n    };\n\n    SVGForm.text = function (ctx, pt, txt, maxWidth, dx, dy) {\n      var elem;\n\n      if (maxWidth == null) {\n        maxWidth = 0;\n      }\n\n      if (dx == null) {\n        dx = 0;\n      }\n\n      if (dy == null) {\n        dy = 0;\n      }\n\n      elem = SVGSpace.svgElement(ctx.group, \"text\", SVGForm.id(ctx));\n\n      if (!elem) {\n        return;\n      }\n\n      DOMSpace.attr(elem, {\n        \"pointer-events\": \"none\",\n        x: pt.x,\n        y: pt.y,\n        dx: 0,\n        dy: 0\n      });\n      elem.textContent = txt;\n      SVGForm.style(elem, {\n        fill: ctx.style.fill,\n        stroke: ctx.style.stroke,\n        \"font-family\": ctx.fontFace || false,\n        \"font-size\": ctx.fontSize || false\n      });\n      return elem;\n    };\n\n    SVGForm.prototype.text = function (p, txt, maxWidth, xoff, yoff) {\n      if (maxWidth == null) {\n        maxWidth = 1000;\n      }\n\n      this.nextID();\n      SVGForm.text(this.cc, p, txt, maxWidth, xoff, yoff);\n      return this;\n    };\n\n    SVGForm.prototype.font = function (size, face) {\n      if (face == null) {\n        face = false;\n      }\n\n      this.cc.fontFace = face;\n      this.cc.fontSize = size;\n      this.cc.font = size + \"px \" + face;\n      return this;\n    };\n\n    SVGForm.prototype.draw = function (shape) {\n      return this.sketch(shape);\n    };\n\n    SVGForm.prototype.sketch = function (shape) {\n      shape.floor();\n\n      if (shape instanceof Circle) {\n        SVGForm.circle(this.cc, shape, this.filled, this.stroked);\n      } else if (shape instanceof Rectangle) {\n        SVGForm.rect(this.cc, shape, this.filled, this.stroked);\n      } else if (shape instanceof Triangle) {\n        SVGForm.triangle(this.cc, shape, this.filled, this.stroked);\n      } else if (shape instanceof Line || shape instanceof Pair) {\n        SVGForm.line(this.cc, shape);\n      } else if (shape instanceof PointSet) {\n        SVGForm.polygon(this.cc, shape.points);\n      } else if (shape instanceof Vector || shape instanceof Point) {\n        SVGForm.point(this.cc, shape);\n      }\n\n      return this;\n    };\n\n    return SVGForm;\n  }();\n\n  this.SVGForm = SVGForm;\n\n  SVGSpace = function (superClass) {\n    extend(SVGSpace, superClass);\n\n    function SVGSpace(id, bgcolor, context) {\n      if (id == null) {\n        id = 'pt_space';\n      }\n\n      if (bgcolor == null) {\n        bgcolor = false;\n      }\n\n      if (context == null) {\n        context = 'svg';\n      }\n\n      SVGSpace.__super__.constructor.apply(this, arguments);\n\n      this.bg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n      this.bg.setAttribute(\"id\", id + \"_bg\");\n      this.bg.setAttribute(\"fill\", bgcolor);\n      this.space.appendChild(this.bg);\n    }\n\n    SVGSpace.prototype._createSpaceElement = function () {\n      this.space = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n      this.space.setAttribute(\"id\", this.id);\n      return this.appended = false;\n    };\n\n    SVGSpace.svgElement = function (parent, name, id) {\n      var elem;\n\n      if (!parent || !parent.appendChild) {\n        throw \"parent parameter needs to be a DOM node\";\n      }\n\n      elem = document.querySelector(\"#\" + id);\n\n      if (!elem) {\n        elem = document.createElementNS(\"http://www.w3.org/2000/svg\", name);\n        elem.setAttribute(\"id\", id);\n        elem.setAttribute(\"class\", id.substring(0, id.indexOf(\"-\")));\n        parent.appendChild(elem);\n      }\n\n      return elem;\n    };\n\n    SVGSpace.prototype.resize = function (w, h, evt) {\n      var k, p, ref;\n      this.size.set(w, h);\n      this.center = new Vector(w / 2, h / 2);\n      this.space.setAttribute(\"width\", w);\n      this.space.setAttribute(\"height\", h);\n      this.bg.setAttribute(\"width\", w);\n      this.bg.setAttribute(\"height\", h);\n      ref = this.items;\n\n      for (k in ref) {\n        p = ref[k];\n\n        if (p.onSpaceResize != null) {\n          p.onSpaceResize(w, h, evt);\n        }\n      }\n\n      return this;\n    };\n\n    SVGSpace.prototype.remove = function (item) {\n      var aa, len1, t, temp;\n      temp = this.space.querySelectorAll(\".\" + SVGForm._scopeID(item));\n\n      for (aa = 0, len1 = temp.length; aa < len1; aa++) {\n        t = temp[aa];\n        t.parentNode.removeChild(t);\n      }\n\n      delete this.items[item.animateID];\n      return this;\n    };\n\n    SVGSpace.prototype.removeAll = function () {\n      while (this.space.firstChild) {\n        this.space.removeChild(this.space.firstChild);\n        return this;\n      }\n    };\n\n    return SVGSpace;\n  }(DOMSpace);\n\n  this.SVGSpace = SVGSpace;\n\n  Easing = function () {\n    function Easing() {}\n\n    Easing.linear = function (t, b, c, d) {\n      return c * (t /= d) + b;\n    };\n\n    Easing._linear = function (t) {\n      return Easing.linear(t, 0, 1, 1);\n    };\n\n    Easing.quadIn = function (t, b, c, d) {\n      return c * (t /= d) * t + b;\n    };\n\n    Easing._quadIn = function (t) {\n      return Easing.quadIn(t, 0, 1, 1);\n    };\n\n    Easing.quadOut = function (t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    };\n\n    Easing._quadOut = function (t) {\n      return Easing.quadOut(t, 0, 1, 1);\n    };\n\n    Easing.cubicIn = function (t, b, c, d) {\n      t = t / d;\n      return c * t * t * t + b;\n    };\n\n    Easing._cubicIn = function (t) {\n      return Easing.cubicIn(t, 0, 1, 1);\n    };\n\n    Easing.cubicOut = function (t, b, c, d) {\n      t = t / d;\n      return c * ((t - 1) * t * t + 1) + b;\n    };\n\n    Easing._cubicOut = function (t) {\n      return Easing.cubicOut(t, 0, 1, 1);\n    };\n\n    Easing.elastic = function (t, b, c, d, el) {\n      var a, p, s;\n\n      if (el == null) {\n        el = 0.3;\n      }\n\n      s = 1.70158;\n      p = d * el;\n      a = c;\n\n      if (t === 0) {\n        return b;\n      }\n\n      t = t / d;\n\n      if (t === 1) {\n        return b + c;\n      }\n\n      if (a < Math.abs(c)) {\n        a = c;\n        s = p / 4;\n      } else if (a !== 0) {\n        s = p / Const.two_pi * Math.asin(c / a);\n      } else {\n        s = 0;\n      }\n\n      return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * Const.two_pi / p) + c + b;\n    };\n\n    Easing._elastic = function (t) {\n      return Easing.elastic(t, 0, 1, 1);\n    };\n\n    Easing.bounce = function (t, b, c, d) {\n      if ((t /= d) < 1 / 2.75) {\n        return c * (7.5625 * t * t) + b;\n      } else if (t < 2 / 2.75) {\n        return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n      } else if (t < 2.5 / 2.75) {\n        return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n      } else {\n        return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n      }\n    };\n\n    Easing._bounce = function (t) {\n      return Easing.bounce(t, 0, 1, 1);\n    };\n\n    return Easing;\n  }();\n\n  this.Easing = Easing;\n\n  GridCascade = function (superClass) {\n    extend(GridCascade, superClass);\n\n    function GridCascade() {\n      GridCascade.__super__.constructor.apply(this, arguments);\n\n      this.startRow = 0;\n    }\n\n    GridCascade.prototype.resetLayout = function () {\n      this.layout = [];\n      return this.startRow = 0;\n    };\n\n    GridCascade.prototype.occupy = function (x, y, w, h) {\n      var aa, ab, c, r, ref, ref1, ref2, ref3;\n\n      for (c = aa = ref = x, ref1 = w + x; ref <= ref1 ? aa < ref1 : aa > ref1; c = ref <= ref1 ? ++aa : --aa) {\n        for (r = ab = ref2 = y, ref3 = h + y; ref2 <= ref3 ? ab < ref3 : ab > ref3; r = ref2 <= ref3 ? ++ab : --ab) {\n          if (this.layout[r] == null) {\n            this.layout[r] = [];\n          }\n\n          this.layout[r][c] = 1;\n        }\n      }\n\n      return this;\n    };\n\n    GridCascade.prototype.findStartRow = function () {\n      var aa, ab, c, index, r, ref, ref1, ref2;\n      index = this.startRow;\n\n      for (r = aa = ref = this.startRow, ref1 = this.rows; ref <= ref1 ? aa < ref1 : aa > ref1; r = ref <= ref1 ? ++aa : --aa) {\n        index = r;\n\n        for (c = ab = 0, ref2 = this.columns; 0 <= ref2 ? ab < ref2 : ab > ref2; c = 0 <= ref2 ? ++ab : --ab) {\n          if (this.layout[r] != null) {\n            if (this.layout[r][c] == null || this.layout[r][c] <= 0) {\n              return index;\n            }\n          }\n        }\n      }\n\n      return index;\n    };\n\n    GridCascade.prototype.fit = function (cols, rows) {\n      var aa, ab, ac, allRowsFree, b, cell, colCount, colSize, currCol, currRow, freeCol, rc, ref, ref1, ref2, ref3, ref4;\n      colSize = Math.min(cols, this.columns);\n\n      for (currRow = aa = ref = this.startRow, ref1 = this.rows; ref <= ref1 ? aa < ref1 : aa > ref1; currRow = ref <= ref1 ? ++aa : --aa) {\n        colCount = colSize;\n        freeCol = 0;\n\n        if (currRow + rows >= this.rows) {\n          this.rows += rows;\n        }\n\n        if (this.layout[currRow] == null) {\n          this.layout[currRow] = [];\n        }\n\n        for (currCol = ab = 0, ref2 = this.columns; 0 <= ref2 ? ab < ref2 : ab > ref2; currCol = 0 <= ref2 ? ++ab : --ab) {\n          cell = this.layout[currRow][currCol];\n\n          if (cell != null && cell > 0) {\n            freeCol = currCol + 1;\n            colCount = colSize;\n          } else {\n            colCount--;\n\n            if (colCount === 0) {\n              allRowsFree = true;\n\n              if (rows > 1) {\n                for (rc = ac = ref3 = currRow, ref4 = currRow + rows; ref3 <= ref4 ? ac < ref4 : ac > ref4; rc = ref3 <= ref4 ? ++ac : --ac) {\n                  if (rc <= this.rows && this.layout[rc] != null && this.layout[rc][freeCol] > 0) {\n                    allRowsFree = false;\n                    break;\n                  }\n                }\n              }\n\n              if (allRowsFree) {\n                this.occupy(freeCol, currRow, colSize, rows);\n\n                if (currRow > this.startRow) {\n                  this.startRow = this.findStartRow();\n                }\n\n                b = new Rectangle(this.$add(this.cell.size.$multiply(freeCol, currRow)));\n                b.resizeTo(this.cell.size.$multiply(colSize, rows));\n                return {\n                  row: currRow,\n                  column: freeCol,\n                  columnSize: colSize,\n                  rowSize: rows,\n                  bound: b\n                };\n              }\n            }\n          }\n        }\n      }\n\n      console.error(\"cannot fit \" + currRow + \" \" + freeCol + \" \" + cols + \" \" + rows);\n      return false;\n    };\n\n    return GridCascade;\n  }(Grid);\n\n  this.GridCascade = GridCascade;\n\n  ParticleEmitter = function (superClass) {\n    extend(ParticleEmitter, superClass);\n\n    function ParticleEmitter() {\n      ParticleEmitter.__super__.constructor.apply(this, arguments);\n\n      this.system = null;\n      this.lastTime = 0;\n      this.period = 0;\n      this.animateID = -1;\n    }\n\n    ParticleEmitter.prototype.init = function (system) {\n      return this.system = system;\n    };\n\n    ParticleEmitter.prototype.frequency = function (f) {\n      this.period = 1000 / f;\n      return this;\n    };\n\n    ParticleEmitter.prototype.emit = function () {};\n\n    ParticleEmitter.prototype.animate = function (time, frame, ctx) {\n      if (time - this.lastTime > this.period) {\n        this.emit();\n        return this.lastTime = time;\n      }\n    };\n\n    return ParticleEmitter;\n  }(Vector);\n\n  this.ParticleEmitter = ParticleEmitter;\n\n  ParticleField = function (superClass) {\n    extend(ParticleField, superClass);\n\n    function ParticleField() {\n      ParticleField.__super__.constructor.apply(this, arguments);\n\n      this.system = void 0;\n    }\n\n    ParticleField.prototype.check = function (particles, removal) {\n      var aa, len1, p, temp;\n\n      if (removal == null) {\n        removal = false;\n      }\n\n      temp = [];\n\n      for (aa = 0, len1 = particles.length; aa < len1; aa++) {\n        p = particles[aa];\n\n        if (this.hasIntersect(p)) {\n          this.work(p);\n        } else {\n          temp.push(p);\n        }\n      }\n\n      return removal ? temp : particles;\n    };\n\n    ParticleField.prototype.work = function (p) {};\n\n    return ParticleField;\n  }(Rectangle);\n\n  this.ParticleField = ParticleField;\n\n  QuadTree = function (superClass) {\n    extend(QuadTree, superClass);\n\n    function QuadTree() {\n      QuadTree.__super__.constructor.apply(this, arguments);\n\n      this.quads = false;\n      this.items = [];\n      this.depth = 0;\n      this.max_depth = 6;\n      this.max_items = 2;\n    }\n\n    QuadTree.prototype.getQuads = function (p, list) {\n      var k, q, ref;\n\n      if (list == null) {\n        list = [];\n      }\n\n      if (this.intersectPoint(p)) {\n        list.push(this);\n\n        if (this.quads) {\n          ref = this.quads;\n\n          for (k in ref) {\n            q = ref[k];\n\n            if (q.intersectPoint(p)) {\n              q.getQuads(p, list);\n            }\n          }\n        }\n      }\n\n      return list;\n    };\n\n    QuadTree.prototype.getItems = function (p) {\n      var k, q, ref;\n\n      if (this.intersectPoint(p)) {\n        if (!this.quads) {\n          return this.items;\n        }\n\n        if (this.quads) {\n          ref = this.quads;\n\n          for (k in ref) {\n            q = ref[k];\n\n            if (q.intersectPoint(p)) {\n              return q.getItems(p);\n            }\n          }\n        }\n      }\n\n      return [];\n    };\n\n    QuadTree.prototype.addToQuad = function (item) {\n      var _depth, k, q, ref;\n\n      if (!item) {\n        return -1;\n      }\n\n      if (this.quads) {\n        ref = this.quads;\n\n        for (k in ref) {\n          q = ref[k];\n          _depth = q.addToQuad(item);\n\n          if (_depth > 0) {\n            return _depth;\n          }\n        }\n\n        return -1;\n      }\n\n      if (!this.quads && this.intersectPoint(item)) {\n        if (this.items.length >= this.max_items) {\n          if (this.depth < this.max_depth) {\n            this.splitQuad();\n            return this.addToQuad(item);\n          } else {\n            return -1;\n          }\n        } else {\n          this.items.push(item);\n          return this.depth;\n        }\n      }\n\n      return -1;\n    };\n\n    QuadTree.prototype.splitQuad = function () {\n      var _depth, aa, ab, i, item, k, len1, len2, q, ref, ref1, ref2, results, t;\n\n      this.quads = this.quadrants();\n      ref = this.quads;\n\n      for (k in ref) {\n        q = ref[k];\n        q.depth = this.depth + 1;\n      }\n\n      ref1 = this.items;\n\n      for (i = aa = 0, len1 = ref1.length; aa < len1; i = ++aa) {\n        item = ref1[i];\n        _depth = this.addToQuad(item);\n\n        if (_depth > this.depth) {\n          this.items[i] = null;\n        }\n      }\n\n      ref2 = this.items;\n      results = [];\n\n      for (ab = 0, len2 = ref2.length; ab < len2; ab++) {\n        t = ref2[ab];\n\n        if (!t) {\n          results.push(this.items.splice(t, 1));\n        } else {\n          results.push(void 0);\n        }\n      }\n\n      return results;\n    };\n\n    QuadTree.prototype.resetQuad = function () {\n      var k, q, ref;\n      this.items = [];\n\n      if (this.quads) {\n        ref = this.quads;\n\n        for (k in ref) {\n          q = ref[k];\n          q.resetQuad();\n        }\n\n        return this.quads = false;\n      }\n    };\n\n    return QuadTree;\n  }(Rectangle);\n\n  this.QuadTree = QuadTree;\n\n  SamplePoints = function (superClass) {\n    extend(SamplePoints, superClass);\n\n    function SamplePoints() {\n      SamplePoints.__super__.constructor.apply(this, arguments);\n\n      this.bestcandidate = null;\n      this.poisson = null;\n      this.bound = null;\n      this.boundsize = null;\n    }\n\n    SamplePoints.prototype.setBounds = function (b, anchor) {\n      if (anchor == null) {\n        anchor = false;\n      }\n\n      if (anchor) {\n        this.set(b);\n      }\n\n      this.bound = new Rectangle(this).size(b.size());\n      return this;\n    };\n\n    SamplePoints.prototype.bestCandidateSampler = function () {\n      this.points = [];\n\n      if (!this.bound) {\n        this.bound = new Rectangle().size(500, 500);\n      }\n\n      this.boundsize = this.bound.size();\n      this.bestcandidate = {\n        halfsize: this.boundsize.$divide(2),\n        quartersize: this.boundsize.$divide(4),\n        maxDist: this.boundsize.x * this.boundsize.x + this.boundsize.y * this.boundsize.y\n      };\n      return this;\n    };\n\n    SamplePoints.prototype.poissonSampler = function (radius) {\n      var cellsize;\n      this.points = [];\n\n      if (!this.bound) {\n        this.bound = new Rectangle().size(500, 500);\n      }\n\n      this.boundsize = this.bound.size();\n      cellsize = radius * Math.SQRT1_2;\n      this.poisson = {\n        grid: [],\n        gridWidth: Math.ceil(this.boundsize.x / cellsize),\n        gridHeight: Math.ceil(this.boundsize.y / cellsize),\n        cellSize: cellsize,\n        radius: radius,\n        radius2: radius * radius,\n        R: 3 * radius * radius,\n        queue: [],\n        queueSize: 0,\n        sampleSize: 0,\n        sincos: Util.sinCosTable()\n      };\n      return this;\n    };\n\n    SamplePoints.prototype.sample = function (numSamples, type) {\n      var a, aa, ab, best, bestDist, i, j, nearest, p, r, ref, ref1, s, x, y;\n\n      if (numSamples == null) {\n        numSamples = 10;\n      }\n\n      if (type == null) {\n        type = false;\n      }\n\n      if (this.poisson && type === 'poisson') {\n        if (this.poisson.sampleSize > 0 && this.poisson.queueSize === 0) {\n          return false;\n        }\n\n        if (!this.poisson.sampleSize) {\n          return this._poissonSample(this.bound.x + this.boundsize.x / 2, this.bound.y + this.boundsize.y / 2);\n        }\n\n        while (this.poisson.queueSize) {\n          i = Math.floor(Math.random() * this.poisson.queueSize);\n          s = this.poisson.queue[i];\n\n          for (j = aa = 0, ref = numSamples; aa < ref; j = aa += 1) {\n            a = Math.floor(360 * Math.random());\n            r = Math.sqrt(Math.random() * this.poisson.R + this.poisson.radius2);\n            x = s.x + r * this.poisson.sincos.cos[a];\n            y = s.y + r * this.poisson.sincos.sin[a];\n\n            if (x >= this.bound.x && x < this.boundsize.x && y >= this.bound.y && y < this.boundsize.y && this._poissonCheck(x, y)) {\n              return this._poissonSample(x, y);\n            }\n          }\n\n          this.poisson.queue[i] = this.poisson.queue[--this.poisson.queueSize];\n          this.poisson.queue.length = this.poisson.queueSize;\n        }\n\n        return true;\n      } else if (this.bestcandidate) {\n        best = null;\n        bestDist = -1;\n\n        for (i = ab = 0, ref1 = numSamples; ab < ref1; i = ab += 1) {\n          p = new Vector(this.bound.x + this.boundsize.x * Math.random(), this.bound.y + this.boundsize.y * Math.random());\n\n          if (this.points.length === 0) {\n            best = p;\n            break;\n          } else {\n            nearest = this._bestCandidateCheck(p);\n\n            if (nearest > bestDist) {\n              best = p;\n              bestDist = nearest;\n            }\n          }\n        }\n\n        if (best) {\n          this.points.push(best);\n        }\n\n        return best;\n      }\n    };\n\n    SamplePoints.prototype._bestCandidateCheck = function (p) {\n      var _dist, aa, dist, dx, dy, halfbound, it, len1, matches, w;\n\n      _dist = this.bestcandidate.maxDist;\n      halfbound = new Rectangle(p.x - this.bestcandidate.quartersize.x, p.y - this.bestcandidate.quartersize.y).size(this.bestcandidate.halfsize.x, this.bestcandidate.halfsize.y);\n\n      matches = function () {\n        var aa, len1, ref, results;\n        ref = this.points;\n        results = [];\n\n        for (aa = 0, len1 = ref.length; aa < len1; aa++) {\n          it = ref[aa];\n\n          if (halfbound.intersectPoint(it)) {\n            results.push(it);\n          }\n        }\n\n        return results;\n      }.call(this);\n\n      for (aa = 0, len1 = matches.length; aa < len1; aa++) {\n        w = matches[aa];\n        dx = w.x - p.x;\n        dy = w.y - p.y;\n        dist = dx * dx + dy * dy;\n\n        if (dist < _dist) {\n          _dist = dist;\n        }\n      }\n\n      return _dist;\n    };\n\n    SamplePoints.prototype._poissonSample = function (x, y) {\n      var s;\n      s = new Point(x, y);\n      this.poisson.queue.push(s);\n      this.poisson.grid[this.poisson.gridWidth * (y / this.poisson.cellSize | 0) + (x / this.poisson.cellSize | 0)] = s;\n      this.poisson.sampleSize++;\n      this.poisson.queueSize++;\n      return s;\n    };\n\n    SamplePoints.prototype._poissonCheck = function (x, y) {\n      var aa, ab, dx, dy, i, i0, i1, j, j0, j1, o, ref, ref1, ref2, ref3, s;\n      i = Math.floor(x / this.poisson.cellSize);\n      j = Math.floor(y / this.poisson.cellSize);\n      i0 = Math.max(i - 2, 0);\n      j0 = Math.max(j - 2, 0);\n      i1 = Math.min(i + 3, this.poisson.gridWidth);\n      j1 = Math.min(j + 3, this.poisson.gridHeight);\n\n      for (j = aa = ref = j0, ref1 = j1; aa < ref1; j = aa += 1) {\n        o = j * this.poisson.gridWidth;\n\n        for (i = ab = ref2 = i0, ref3 = i1; ab < ref3; i = ab += 1) {\n          s = this.poisson.grid[o + i];\n\n          if (s) {\n            dx = s.x - x;\n            dy = s.y - y;\n\n            if (dx * dx + dy * dy < this.poisson.radius2) {\n              return false;\n            }\n          }\n        }\n      }\n\n      return true;\n    };\n\n    SamplePoints.bestCandidate = function (bound, items, samples) {\n      var _nearest, aa, best, bestDist, halfsize, i, maxDist, nearest, p, quartersize, ref, size;\n\n      if (samples == null) {\n        samples = 10;\n      }\n\n      size = bound.size();\n      halfsize = size.$divide(2);\n      quartersize = size.$divide(4);\n      maxDist = size.x * size.x + size.y * size.y;\n\n      _nearest = function _nearest(p) {\n        var _dist, aa, dist, dx, dy, halfbound, it, len1, matches, w;\n\n        _dist = maxDist;\n        halfbound = new Rectangle(p.x - quartersize.x, p.y - quartersize.y).size(halfsize.x, halfsize.y);\n\n        matches = function () {\n          var aa, len1, results;\n          results = [];\n\n          for (aa = 0, len1 = items.length; aa < len1; aa++) {\n            it = items[aa];\n\n            if (halfbound.intersetPoint(it)) {\n              results.push(it);\n            }\n          }\n\n          return results;\n        }();\n\n        for (aa = 0, len1 = matches.length; aa < len1; aa++) {\n          w = matches[aa];\n          dx = w.x - p.x;\n          dy = w.y - p.y;\n          dist = dx * dx + dy * dy;\n\n          if (dist < _dist) {\n            _dist = dist;\n          }\n        }\n\n        return _dist;\n      };\n\n      best = null;\n      bestDist = -1;\n\n      for (i = aa = 0, ref = samples; 0 <= ref ? aa < ref : aa > ref; i = 0 <= ref ? ++aa : --aa) {\n        p = new Vector(bound.x + size.x * Math.random(), bound.y + size.y * Math.random());\n\n        if (items.length === 0) {\n          return p;\n        } else {\n          nearest = _nearest(p);\n\n          if (nearest > bestDist) {\n            best = p;\n            bestDist = nearest;\n          }\n        }\n      }\n\n      return best;\n    };\n\n    return SamplePoints;\n  }(PointSet);\n\n  this.SamplePoints = SamplePoints;\n\n  StripeBound = function (superClass) {\n    extend(StripeBound, superClass);\n\n    function StripeBound() {\n      StripeBound.__super__.constructor.apply(this, arguments);\n\n      this.frequency = new Point();\n      this.stripes = new Point();\n      this.method = 'frequency';\n      this.mask = null;\n    }\n\n    StripeBound.prototype.setFrequency = function (x, y) {\n      this.frequency = new Vector(x, y);\n      return this.method = 'frequency';\n    };\n\n    StripeBound.prototype.setStripes = function (x, y) {\n      this.stripes = new Point(x, y);\n      return this.method = 'stripes';\n    };\n\n    StripeBound.prototype.getStripes = function () {\n      var aa, ab, d, diff, dx, dy, freq, p, ref, ref1, result, size;\n      size = this.size();\n      result = {\n        columns: [],\n        rows: []\n      };\n      freq = this.method === 'frequency' ? this.frequency.clone() : size.$divide(this.stripes).floor();\n      diff = size.$divide(freq);\n\n      for (d = aa = 0, ref = freq.y - 1; 0 <= ref ? aa <= ref : aa >= ref; d = 0 <= ref ? ++aa : --aa) {\n        dy = diff.y * d;\n        p = new Pair(0, dy).to(size.x, dy + diff.y).add(this);\n        p.p1.add(this);\n        result.rows.push(p);\n      }\n\n      for (d = ab = 0, ref1 = freq.x - 1; 0 <= ref1 ? ab <= ref1 : ab >= ref1; d = 0 <= ref1 ? ++ab : --ab) {\n        dx = diff.x * d;\n        p = new Pair(dx, 0).to(dx + diff.x + 0.5, size.y).add(this);\n        p.p1.add(this);\n        result.columns.push(p);\n      }\n\n      return result;\n    };\n\n    StripeBound.prototype.getStripeLines = function () {\n      var aa, ab, d, diff, dx, dy, freq, p, ref, ref1, result, size;\n      size = this.size();\n      result = {\n        columns: [],\n        rows: []\n      };\n      freq = this.method === 'frequency' ? this.frequency.clone() : size.$divide(this.stripes).floor();\n      diff = size.$divide(freq);\n\n      for (d = aa = 0, ref = freq.y; 0 <= ref ? aa <= ref : aa >= ref; d = 0 <= ref ? ++aa : --aa) {\n        dy = diff.y * d;\n        p = new Pair(0, dy).to(size.x, dy).add(this);\n        p.p1.add(this);\n        result.rows.push(p);\n      }\n\n      for (d = ab = 0, ref1 = freq.x; 0 <= ref1 ? ab <= ref1 : ab >= ref1; d = 0 <= ref1 ? ++ab : --ab) {\n        dx = diff.x * d;\n        p = new Pair(dx, 0).to(dx, size.y).add(this);\n        p.p1.add(this);\n        result.columns.push(p);\n      }\n\n      return result;\n    };\n\n    StripeBound.prototype.setMask = function (w, h, anchor) {\n      var diff, sz;\n\n      if (anchor == null) {\n        anchor = false;\n      }\n\n      this.mask = new Rectangle(this.x, this.y);\n      sz = this.size();\n\n      if (!anchor) {\n        diff = sz.$subtract(w, h).divide(2);\n        anchor = new Point(this.x + diff.x, this.y + diff.y);\n      } else {\n        anchor = this.$add(anchor);\n      }\n\n      return this.mask.set(anchor.x, anchor.y).size(w, h);\n    };\n\n    StripeBound.prototype.anchorMask = function () {\n      var d;\n      d = this.$subtract(this.mask);\n      this.moveBy(d);\n      return this.mask.moveBy(d);\n    };\n\n    return StripeBound;\n  }(Rectangle);\n\n  this.StripeBound = StripeBound;\n\n  UI = function (superClass) {\n    extend(UI, superClass);\n    UI.dragTarget = null;\n\n    function UI() {\n      UI.__super__.constructor.apply(this, arguments);\n\n      this.dragging = false;\n    }\n\n    UI.prototype.animate = function (time, frame, ctx) {\n      ctx.fillStyle = '#f00';\n      return Form.rect(ctx, this);\n    };\n\n    UI.prototype.onMouseAction = function (type, x, y, evt) {\n      if (this.intersectPoint(x, y)) {\n        if (type === 'drag' && !UI.dragTarget) {\n          this.dragging = true;\n          UI.dragTarget = this;\n        }\n      }\n\n      if (this.dragging && type === 'move') {\n        this.moveTo(x, y).moveBy(this.size().multiply(-0.5));\n      }\n\n      if (type === 'drop') {\n        this.dragging = false;\n        return UI.dragTarget = null;\n      }\n    };\n\n    return UI;\n  }(Rectangle);\n\n  this.UI = UI;\n\n  Noise = function (superClass) {\n    extend(Noise, superClass);\n    Noise.prototype.grad3 = [[1, 1, 0], [-1, 1, 0], [1, -1, 0], [-1, -1, 0], [1, 0, 1], [-1, 0, 1], [1, 0, -1], [-1, 0, -1], [0, 1, 1], [0, -1, 1], [0, 1, -1], [0, -1, -1]];\n    Noise.prototype.simplex = [[0, 1, 2, 3], [0, 1, 3, 2], [0, 0, 0, 0], [0, 2, 3, 1], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 2, 3, 0], [0, 2, 1, 3], [0, 0, 0, 0], [0, 3, 1, 2], [0, 3, 2, 1], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 3, 2, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [1, 2, 0, 3], [0, 0, 0, 0], [1, 3, 0, 2], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 3, 0, 1], [2, 3, 1, 0], [1, 0, 2, 3], [1, 0, 3, 2], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 0, 3, 1], [0, 0, 0, 0], [2, 1, 3, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [2, 0, 1, 3], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [3, 0, 1, 2], [3, 0, 2, 1], [0, 0, 0, 0], [3, 1, 2, 0], [2, 1, 0, 3], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [3, 1, 0, 2], [0, 0, 0, 0], [3, 2, 0, 1], [3, 2, 1, 0]];\n\n    function Noise() {\n      var i;\n\n      Noise.__super__.constructor.apply(this, arguments);\n\n      this.p = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 9, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\n\n      this.perm = function () {\n        var aa, results;\n        results = [];\n\n        for (i = aa = 0; aa < 512; i = ++aa) {\n          results.push(this.p[i & 255]);\n        }\n\n        return results;\n      }.call(this);\n    }\n\n    Noise.prototype.seed = function (seed) {\n      var aa, i, results, v;\n\n      if (seed > 0 && seed < 1) {\n        seed *= 65536;\n      }\n\n      seed = Math.floor(seed);\n\n      if (seed < 256) {\n        seed |= seed << 8;\n      }\n\n      results = [];\n\n      for (i = aa = 0; aa <= 255; i = ++aa) {\n        v = i & 1 ? this.p[i] ^ seed & 255 : this.p[i] ^ seed >> 8 & 255;\n        results.push(this.perm[i] = this.perm[i + 256] = v);\n      }\n\n      return results;\n    };\n\n    Noise.prototype._dot = function (g, x, y) {\n      return g[0] * x + g[1] * y;\n    };\n\n    Noise.prototype.perlin2d = function (xin, yin) {\n      var _fade, i, j, n00, n01, n10, n11, tx, x, y;\n\n      if (xin == null) {\n        xin = this.x;\n      }\n\n      if (yin == null) {\n        yin = this.y;\n      }\n\n      _fade = function _fade(f) {\n        return f * f * f * (f * (f * 6 - 15) + 10);\n      };\n\n      i = Math.floor(xin) % 255;\n      j = Math.floor(yin) % 255;\n      x = xin - i;\n      y = yin - j;\n      n00 = this._dot(this.grad3[(i + this.perm[j]) % 12], x, y);\n      n01 = this._dot(this.grad3[(i + this.perm[j + 1]) % 12], x, y - 1);\n      n10 = this._dot(this.grad3[(i + 1 + this.perm[j]) % 12], x - 1, y);\n      n11 = this._dot(this.grad3[(i + 1 + this.perm[j + 1]) % 12], x - 1, y - 1);\n      tx = _fade(x);\n      return Util.lerp(Util.lerp(n00, n10, tx), Util.lerp(n01, n11, tx), _fade(y));\n    };\n\n    Noise.prototype.simplex2d = function (xin, yin) {\n      var F2, G2, X0, Y0, gi0, gi1, gi2, i, i1, ii, j, j1, jj, n0, n1, n2, s, t, t0, t1, t2, x0, x1, x2, y0, y1, y2;\n\n      if (xin == null) {\n        xin = this.x;\n      }\n\n      if (yin == null) {\n        yin = this.y;\n      }\n\n      F2 = 0.5 * (Math.sqrt(3.0) - 1.0);\n      s = (xin + yin) * F2;\n      i = Math.floor(xin + s);\n      j = Math.floor(yin + s);\n      G2 = (3.0 - Math.sqrt(3.0)) / 6.0;\n      t = (i + j) * G2;\n      X0 = i - t;\n      Y0 = j - t;\n      x0 = xin - X0;\n      y0 = yin - Y0;\n\n      if (x0 > y0) {\n        i1 = 1;\n        j1 = 0;\n      } else {\n        i1 = 0;\n        j1 = 1;\n      }\n\n      x1 = x0 - i1 + G2;\n      y1 = y0 - j1 + G2;\n      x2 = x0 - 1.0 + 2.0 * G2;\n      y2 = y0 - 1.0 + 2.0 * G2;\n      ii = i & 255;\n      jj = j & 255;\n      gi0 = this.perm[ii + this.perm[jj]] % 12;\n      gi1 = this.perm[ii + i1 + this.perm[jj + j1]] % 12;\n      gi2 = this.perm[ii + 1 + this.perm[jj + 1]] % 12;\n      t0 = 0.5 - x0 * x0 - y0 * y0;\n\n      if (t0 < 0) {\n        n0 = 0.0;\n      } else {\n        t0 *= t0;\n        n0 = t0 * t0 * this._dot(this.grad3[gi0], x0, y0);\n      }\n\n      t1 = 0.5 - x1 * x1 - y1 * y1;\n\n      if (t1 < 0) {\n        n1 = 0.0;\n      } else {\n        t1 *= t1;\n        n1 = t1 * t1 * this._dot(this.grad3[gi1], x1, y1);\n      }\n\n      t2 = 0.5 - x2 * x2 - y2 * y2;\n\n      if (t2 < 0) {\n        n2 = 0.0;\n      } else {\n        t2 *= t2;\n        n2 = t2 * t2 * this._dot(this.grad3[gi2], x2, y2);\n      }\n\n      return 70.0 * (n0 + n1 + n2);\n    };\n\n    return Noise;\n  }(Vector);\n}).call(Pt);\nmodule.exports = Pt;"],"sourceRoot":""}